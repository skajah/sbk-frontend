{"version":3,"sources":["context/UserContext.js","components/hoc/withAlert.jsx","components/common/TextBox.jsx","components/common/SearchKeyword.jsx","components/common/SearchDateRange.jsx","components/common/DropdownList.jsx","components/common/ListGroup.jsx","components/posts/PostSearch.jsx","components/common/Media.jsx","components/hoc/withFileChooser.jsx","components/common/icons/FileIcon.jsx","components/common/Button.jsx","components/posts/CreatePostBox.jsx","services/httpService.js","config.js","services/postService.js","utils/makeDate.js","utils/media.js","components/common/Card.jsx","services/commentService.js","services/userService.js","images/profileDefault.jpg","components/common/ProfilePic.jsx","components/common/ContentDetails.jsx","components/common/Dropdown.jsx","components/common/icons/IconCount.jsx","components/common/icons/Like.jsx","components/comments/Comment.jsx","components/comments/Comments.jsx","components/comments/CreateCommentBox.jsx","components/posts/Post.jsx","utils/following.js","components/posts/Posts.jsx","components/posts/PostsPage.jsx","components/NotFound.jsx","components/posts/PostPage.jsx","utils/alert.js","components/common/FormInput.jsx","components/common/Form.jsx","services/authService.js","images/sbk_image.svg","components/Login.jsx","components/common/ProtectedRoute.jsx","components/Navbar.jsx","components/Logout.jsx","components/profile/ProfileDetails.jsx","components/common/TabNav.jsx","components/profile/ProfileSimple.jsx","components/profile/ProfileList.jsx","components/profile/ProfilePage.jsx","components/profile/EditDescription.jsx","components/profile/EditUsername.jsx","components/profile/EditEmail.jsx","components/profile/EditPassword.jsx","components/profile/EditRow.jsx","components/profile/ProfileEdit.jsx","components/ScrollToTop.jsx","components/Register.jsx","App.js","reportWebVitals.js","index.js"],"names":["UserContext","React","createContext","displayName","withAlert","Component","this","props","alert","rest","Fragment","className","type","message","handleTextChange","e","text","currentTarget","value","onTextChange","renderInput","options","name","clear","placeholder","undefined","onChange","renderTextArea","SearchKeyword","handleSearchTextChange","handleKeywordSearch","onKeywordSearch","onClick","dateRange","start","end","handleStartDate","dateString","target","replaceAll","Date","handleDateChange","handleEndDate","toString","onDateRange","DrowdownList","onSelect","map","option","ListGroup","items","selectedItem","item","PostSearch","state","dateRangeError","handleDateRange","setState","searchByUsername","dates","selectedDate","onDateSelected","onPostType","currentUser","context","style","fontSize","margin","DropdownList","contextType","Media","src","alt","controls","media","renderImage","renderVideo","renderAudio","renderMedia","withFileChooser","extensions","maxFileSize","onFileChosen","maxSize","file","onError","msg","children","STYLES","SIZES","COLORS","getStyles","styles","filter","s","includes","join","getSize","size","getColor","color","Button","CreatePostBox","handleCreate","onCreate","handleMediaUpload","handleClearMedia","URL","createObjectURL","axios","interceptors","response","use","error","status","toast","Promise","reject","http","get","post","put","delete","patch","setJwt","jwt","defaults","headers","common","config","apiUrl","loadLimit","postApiEndpoint","getPosts","filterData","maxDate","limit","createPost","deletePost","id","likePost","liked","unlikePost","makeDate","obj","date","LZUTF8","require","readMedia","resolve","reader","FileReader","readAsDataURL","onload","result","onerror","err","compress","data","outputEncoding","compressAsync","decompress","inputEncoding","decompressAsync","decompressPost","a","decompressUser","user","decompressPosts","posts","decompressComments","comments","comment","profilePic","decompressUsers","users","Card","commentApiEndpoint","getComments","postId","createComment","deleteComment","likeComment","unlikeComment","userApiEndpoint","register","getMe","me","updateMe","getUser","getFollowing","getFollowers","checkLiked","checkFollowing","ProfilePic","profileDefault","width","height","borderRadius","marginRight","ContentDetails","profilePicSrc","onProfileClick","username","useContext","toDateString","Dropdown","showOptions","dropdown","createRef","handleOutsideClick","event","current","contains","handleDropdown","handleOption","onOptionSelected","document","addEventListener","removeEventListener","ref","o","IconCount","count","display","marginLeft","formatCount","numeral","format","replace","Like","initialLike","onLike","useState","setLiked","useEffect","icon","Comment","handleLike","_id","likeObj","likes","console","log","handleOptionSelected","onDelete","onFollow","populateState","following","optionMenu","hideOptions","followingUser","push","Comments","loadMore","onLoadMore","CreateCommentBox","Post","handleDeleteComment","numberOfComments","oldComments","length","replacement","c","concat","warning","handleCreateComment","trim","newComment","unshift","handleLoadMore","moreComments","combinedComments","showComments","onPostClick","mediaType","userId","getFollowings","objs","Posts","setFollowing","doGetFollowings","handleFollow","newFollowing","isFollowing","follow","PostsPage","emptyPost","relativeDates","filterMap","likedPosts","daysAgo","resize","mobile","window","innerWidth","populatePosts","morePosts","combinedPosts","oldPosts","oldLength","filteredPosts","handleDelete","warn","newPost","mediaData","compressedData","handleSearchByUsername","trimmed","toLowerCase","relativeDate","handlePostType","handleDateSelected","match","split","handlePostClick","history","handleProfileClick","handleShowSearch","showSearch","handleClearFilter","clearFilterComponent","filterComponent","maxWidth","justifyContent","padding","textAlign","paddingTop","NotFound","PostPage","setPost","params","makeAlert","FormInput","label","inputType","htmlFor","PasswordInput","showPassword","setShowPassword","Form","errors","renderButton","handleChange","validate","Joi","schema","details","path","handleSubmit","preventDefault","doSubmit","validateProperty","input","tokenKey","authApiEndpoint","getJwt","localStorage","getItem","email","password","setItem","auth","login","logout","removeItem","hasCurrentUser","loginWithJwt","Login","string","required","min","onLogin","location","from","pathname","to","sbkImage","onSubmit","_","isEmpty","autoFocus","ProtectedRoute","component","render","NavBar","Logout","ProfileDetails","sameUser","TabNav","tabs","currentTab","tab","ProfileSimple","ProfileList","ProfilePage","followers","handleTabChange","setFollowers","setPosts","handleDeletePost","loadMorePosts","loadMoreFollowing","loadMoreFollowers","setUser","handleLoadMorePosts","handleLoadMoreFollowing","moreFollowing","combinedFollowing","handleLoadMoreFollowers","moreFollowers","combinedFollowers","oldFollowing","oldFollowers","newFollowee","unlisten","listen","action","startsWith","parts","endsWith","substring","EditDescription","description","allow","newDescription","updateUser","defaultValue","EditUsername","newUsername","EditEmail","newEmail","EditPassword","confirmPassword","EditRow","EditRowWithFile","ProfileEdit","goToUpdate","page","handleProfilePicUpload","compressed","arrow","ScrollToTop","componentDidMount","scrollTo","componentDidUpdate","prevProps","PureComponent","withRouter","Register","max","App","handleLogin","ex","property","Provider","exact","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.c79b7039.chunk.js","sourcesContent":["import React from 'react';\n\nconst UserContext = React.createContext();\nUserContext.displayName = 'UserContext';\n\nexport default UserContext;\n","import React from 'react';\n\nfunction withAlert(Component) {\n    return class WithAlert extends React.Component {\n\n        render() {  \n            const { alert, ...rest } = this.props;\n    \n            return (\n            <React.Fragment>\n                <Component {...rest}/>\n                { alert && <div className={\"alert alert--\" + alert.type}>{ alert.message }</div> }\n            </React.Fragment>);\n        }\n    }\n} \n\nexport default withAlert;","import React, { Component } from 'react'\nimport withAlert from '../hoc/withAlert';\n\nclass TextBox extends Component {\n\n    handleTextChange = (e) => {\n        const text = e.currentTarget.value;\n        this.props.onTextChange(text);\n    };\n\n    renderInput = (options = {}) => {\n        const { name, className,clear, placeholder } = options;\n        return (\n            <input \n            name={name}\n            type=\"text\" \n            className={className}\n            value={ clear ? '' : undefined}\n            placeholder={placeholder}\n            onChange={this.handleTextChange}\n            />\n        );\n    }\n\n    renderTextArea  = (options = {}) => {\n        const { name, className,clear, placeholder } = options;\n        return (\n            <textarea \n            name={name}\n            type=\"text\" \n            className={className}\n            value={ clear ? '' : undefined}\n            placeholder={placeholder}\n            onChange={this.handleTextChange}\n            />\n        );\n    }\n\n    render() {\n        const { type, ...rest } = this.props;\n        if (type === 'textarea')\n            return this.renderTextArea(rest);\n        else\n            return this.renderInput(rest);\n    }\n\n   \n}\n \nexport default withAlert(TextBox);","import React, { Component } from 'react'\nimport { BsSearch } from 'react-icons/bs';\nimport TextBox from './TextBox';\n\nclass SearchKeyword extends Component {\n\n    text = ''\n\n    handleSearchTextChange = text => {\n        this.text = text;\n    }\n\n    handleKeywordSearch = () => {\n        this.props.onKeywordSearch(this.text);\n    }\n    \n    render() { \n        const { placeholder } = this.props;\n\n        return ( \n            <div className=\"input-group\">\n                <TextBox \n                name=\"searchKeyword\" \n                placeholder={placeholder} \n                className=\"text-box\"\n                onTextChange={this.handleSearchTextChange}\n                />\n                <span className=\"icon icon--medium clickable\" onClick={() => this.handleKeywordSearch()}>\n                    <BsSearch />\n                </span>\n                 \n            </div>\n         );\n    }\n}\n \nexport default SearchKeyword;","import React, { Component } from 'react'\nimport withAlert from '../hoc/withAlert';\n\nclass SearchDateRange extends Component {\n\n    // Not in state because no need to rerender on these changes\n    dateRange = { start: null, end: null }\n\n    handleStartDate = e => {\n        const dateString = e.target.value.replaceAll('-', '/');\n        this.dateRange.start = new Date(dateString);\n        this.handleDateChange();\n    }\n    \n    handleEndDate = e => {\n        const dateString = e.target.value.replaceAll('-', '/');\n        this.dateRange.end = new Date(dateString);\n        this.handleDateChange();\n    }\n\n    handleDateChange = () => {\n        const { start, end } = this.dateRange;\n        if ((start && end) && \n        (start.toString() !== 'Invalid Date' && end.toString() !== 'Invalid Date'))\n            this.props.onDateRange(start, end);\n    }\n\n    render() { \n\n        return (\n            <div className=\"search-date-range\">\n                <span className=\"label\">From</span>\n                <input \n                type=\"date\" \n                name=\"start-date\" \n                className=\"search-date-range__input\"\n                onChange={this.handleStartDate}/>\n                \n                <span className=\"label\">To</span>\n                <input \n                type=\"date\" \n                name=\"start-end\" \n                className=\"search-date-range__input\"\n                onChange={this.handleEndDate}/>\n            </div>\n        );\n    }\n}\n \nexport default withAlert(SearchDateRange);","import React from 'react';\n\nconst DrowdownList = (props) => {\n    const { options, onSelect } = props;\n    return ( \n        <select className=\"dropdown-list\">\n            <option value=\"\"></option>\n            {\n                options.map(option => {\n                    return <option\n                    className=\"dropdown-list__option\" \n                    key={option}\n                    value={option} \n                    onClick={() => onSelect(option)}>{ option }</option>\n                })\n            }\n        </select>\n     );\n}\n \nexport default DrowdownList;","import React, { Component } from 'react'\n\nclass ListGroup extends Component {\n    render() { \n        const { items, selectedItem, onClick } = this.props;\n        return ( \n            <ul className=\"list-group\">\n                {\n                    items.map(item => {\n                        return <li \n                        key={item}\n                        className={\"list-group__item clickable\" + (item === selectedItem ? ' list-group__item--active' : '')}\n                        onClick={() => onClick(item)}>{item}</li>;\n                    })\n                }\n            </ul>\n         );\n    }\n}\n \nexport default ListGroup;","import React, { Component } from 'react'\nimport SearchKeyword from '../common/SearchKeyword';\nimport SearchDateRange from '../common/SearchDateRange';\nimport DropdownList from '../common/DropdownList';\nimport ListGroup from '../common/ListGroup';\nimport UserContext from '../../context/UserContext';\n\nclass PostSearch extends Component {\n    static contextType = UserContext\n\n    state = {\n        dateRangeError: false\n    }\n\n    handleDateRange = (start, end) => {\n        if (start > end)\n            this.setState({ dateRangeError: true });\n        else{\n            this.props.onDateRange(start, end);\n            this.setState({ dateRangeError: false });\n        }\n    }\n\n    render() { \n        const { \n            searchByUsername, \n            dates, \n            selectedDate, \n            onDateSelected,\n            onPostType } = this.props;\n\n        const { dateRangeError } = this.state;\n        const alert = { type: 'primary', message: \"End date can't be before start date\"};\n        const { currentUser } = this.context;\n\n        return ( \n            <div className=\"post-search\">\n                <p style={{ fontSize: '2rem', margin: '0 0 1rem'}}>Filter posts</p>\n                <SearchKeyword \n                placeholder=\" Enter a username\"\n                onKeywordSearch={searchByUsername}/>\n                \n                {\n                    currentUser &&\n                    <React.Fragment>\n                    <p>Pick a Type</p>\n\n                    <DropdownList \n                    options={['All', 'Liked Posts', 'Following']}\n                    onSelect={onPostType}/>\n                    </React.Fragment>\n                 }\n                <p>Pick a Date</p>\n\n                <ListGroup\n                items={dates} \n                selectedItem={selectedDate}\n                onClick={onDateSelected}/>\n\n                <SearchDateRange \n                onDateRange={this.handleDateRange}\n                alert={dateRangeError && alert}/>\n            </div>\n         );\n    }\n}\n \nexport default PostSearch;","import React, { Component } from 'react';\n\nclass Media extends Component {\n    \n    renderImage(src, alt) {\n        return <img src={src} alt={alt} className=\"media\" />;\n    }\n\n    renderVideo(src, alt) {\n        return <video src={src} controls alt={alt} className=\"media\"  />;\n    }\n\n    renderAudio(src, alt){\n        return <audio src={src} controls alt={alt} className=\"media\"  />;\n    }\n    renderMedia(type, src, alt) {\n        let media = null;\n\n        switch (type) {\n            case 'image':\n            case 'gif':\n                media = this.renderImage(src, alt);\n                break;\n            case 'video':\n                media = this.renderVideo(src, alt);\n                break;\n            case 'audio':\n                media = this.renderAudio(src, alt);\n                break;\n            default:\n                break;\n        }\n\n        return media;\n    }\n\n    render() {\n        const { type, src, alt } = this.props;\n \n        return this.renderMedia(type, src, alt);\n    }\n}\n \nexport default Media;\n","import React from 'react';\nimport { FilePicker } from 'react-file-picker';\n\nfunction withFileChooser(Component) {\n    return class WithFileChooser extends React.Component {\n\n        render() {\n            const { extensions, maxFileSize, onFileChosen, ...rest } = this.props;\n            return (\n            <div className=\"file-chooser\">\n                <FilePicker \n                extensions={extensions}\n                maxSize={maxFileSize}\n                onChange={file => onFileChosen(file)}\n                onError={msg => alert(msg)}>\n                    <Component {...rest} />\n                </FilePicker>\n            </div>\n            );\n        }\n    }\n}\n\nexport default withFileChooser;","import React from 'react';\nimport withFileChooser from '../../hoc/withFileChooser';\n\nfunction FileIcon(props) {\n    return (\n        <span className=\"file-icon clickable\" onClick={props.onClick}>\n            { props.children }\n        </span>\n    )\n}\n\nexport default withFileChooser(FileIcon);\n","import React from 'react';\nimport './Button.css';\n\nconst STYLES = ['outline', 'rounded', 'block', 'corner']\nconst SIZES = ['small', 'medium', 'large']\nconst COLORS = ['primary', 'secondary', 'accent']\n\nfunction Button({\n    children,\n    styles,\n    color,\n    size,\n    onClick,\n    ...rest\n}) {\n    return (\n        <button \n        className={`btn ${getStyles(styles)} ${getSize(size)} ${getColor(color)}`}\n        onClick={onClick}\n        {...rest}>\n            {children}\n        </button>\n    );\n}\n\nconst getStyles = styles => { \n    if (!styles) return '';\n    return styles.filter(s => STYLES.includes(s)).map(s => 'btn--' + s).join(' ');\n}\n\nconst getSize = size => {\n    return SIZES.includes(size) ? 'btn--' + size: '';\n}\n\nconst getColor = color => { \n    return `btn--${COLORS.includes(color) ? color : ''}`; \n}\n\nexport default Button;\n\n","import React, { Component } from 'react';\nimport TextBox from '../common/TextBox';\nimport withAlert from '../hoc/withAlert';\nimport Media from '../common/Media';\nimport UserContext from '../../context/UserContext';\nimport FileIcon from '../common/icons/FileIcon';\nimport Button from '../common/Button';\nimport { AiOutlineCamera, AiOutlineVideoCamera } from 'react-icons/ai';\nimport { IoVolumeHighOutline } from 'react-icons/io5';\nimport './CreatePostBox.css';\n\n\nclass CreatePostBox extends Component {\n    static contextType = UserContext;\n\n    state = {\n        media: null,\n    }\n\n    text = ''\n\n    handleTextChange = text => {\n        this.text = text;\n        if (this.state.clear)\n            this.setState({ clear: false });\n    }\n\n    handleCreate = () => {\n        this.props.onCreate(this.text, this.state.media);\n        this.text = '';\n        this.setState({ media: null, clear: true });\n    }\n\n    handleMediaUpload = (src, type) => {\n        const media = { type, src };\n        this.setState({ media })\n    }\n\n    handleClearMedia = () => {\n        this.setState({ media: null })\n    }\n\n    render() { \n        const { clear, media } = this.state;\n        \n        return ( \n            <div className=\"card create-post\">\n                <header className=\"card__header create-post__header\">\n                    {\n                        media && \n                        <Button\n                        size=\"small\"\n                        color=\"secondary\"\n                        onClick={this.handleClearMedia}>Clear Media\n                        </Button>\n                    }\n                </header>\n                <div className=\"card__body create-post__body\">\n                    <TextBox \n                    name=\"postText\"\n                    placeholder=\" What's on your mind?\"\n                    clear={clear}\n                    onTextChange={this.handleTextChange}\n                    className=\"text-box create-post-text-box\"\n                    type=\"textarea\"/>\n\n                    { media && \n                    <Media \n                    type={media.type} \n                    src={URL.createObjectURL(media.src)} \n                    alt={'Post Media: ' + media.type}/> \n                    }\n\n                </div>\n                <div className=\"create-post__footer\">\n                    <FileIcon\n                    extensions={['jpg', 'jpeg', 'png', 'gif']}\n                    onFileChosen={src => this.handleMediaUpload(src, 'image')}\n                    maxFileSize={8}>\n                        <span className=\"icon icon--medium\">\n                            <AiOutlineCamera />\n                        </span>\n                    </FileIcon>\n\n                    <FileIcon\n                    extensions={['mp4', 'mov', 'mpg']}\n                    onFileChosen={src => this.handleMediaUpload(src, 'video')}\n                    maxFileSize={8}>\n                        <span className=\"icon icon--medium\">\n                            <AiOutlineVideoCamera />\n                        </span>\n                    </FileIcon>\n\n                    <FileIcon\n                    extensions={['mp3', 'wav', 'ogg']}\n                    onFileChosen={src => this.handleMediaUpload(src, 'audio')}\n                    maxFileSize={8}>\n                        <span className=\"icon icon--medium\">\n                            <IoVolumeHighOutline />\n                        </span>\n                    </FileIcon>\n\n                    <Button\n                    color=\"accent\"\n                    size=\"small\"\n                    onClick={this.handleCreate}>\n                        Post\n                    </Button>\n                </div>\n            </div>\n         );\n    }\n}\n \nexport default withAlert(CreatePostBox);","import axios from 'axios';\nimport { toast } from 'react-toastify';\n\n// includes token whenever we make an http request\n// however, create bi-directional dependency. http needs auth and auth need http\n\naxios.interceptors.response.use(null, (error) => {\n  const response = error.response;\n  const expectedError =\n    response && response.status >= 400 && response.status < 500;\n\n  if (!expectedError) {\n    toast.error(\n      <div>\n        An unexpected error occured <br /> {error.message}\n      </div>\n    );\n  }\n  return Promise.reject(error);\n});\n\nfunction setJwt(jwt) {\n  axios.defaults.headers.common['x-auth-token'] = jwt;\n}\n\nconst http = {\n  get: axios.get,\n  post: axios.post,\n  put: axios.put,\n  delete: axios.delete,\n  patch: axios.patch,\n  setJwt,\n};\n\nexport default http;\n","const configDefault = {\n  apiUrl: 'http://localhost:4000/api',\n  loadLimit: 5,\n};\n\nconst configProduction = {\n  ...configDefault,\n  apiUrl: 'https://sbk-backend.herokuapp.com/api',\n};\n\nconst config =\n  process.env.NODE_ENV === 'production' ? configProduction : configDefault;\n\nexport default config;\n","import http from './httpService';\nimport config from '../config';\n\nconst loadLimit = config.loadLimit;\n\nconst postApiEndpoint = config.apiUrl + '/posts';\n\nexport function getPosts({ filter, filterData, maxDate, limit = loadLimit }) {\n  return http.get(\n    `${postApiEndpoint}?filter=${\n      filter || ''\n    }&filterData=${filterData}&maxDate=${maxDate || ''}&limit=${limit}`\n  );\n}\n\nexport function getPost(id) {\n  return http.get(`${postApiEndpoint}/${id}`);\n}\n\nexport function createPost(post) {\n  return http.post(postApiEndpoint, post);\n}\n\nexport function deletePost(id) {\n  return http.delete(`${postApiEndpoint}/${id}`);\n}\n\nexport function likePost(id) {\n  return http.patch(`${postApiEndpoint}/${id}`, { liked: true });\n}\n\nexport function unlikePost(id) {\n  return http.patch(`${postApiEndpoint}/${id}`, { liked: false });\n}\n","export function makeDate(obj) {\n  obj.date = new Date(obj.date);\n}\n\nexport function makeDates(objs) {\n  objs.forEach(makeDate);\n}\n","import { makeDate } from './makeDate';\nconst LZUTF8 = require('lzutf8');\n\nexport function readMedia(file) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = () => {\n      resolve(reader.result);\n    };\n    reader.onerror = (err) => {\n      reject(err);\n    };\n  });\n}\n\nexport function compress(data, outputEncoding = 'StorageBinaryString') {\n  return new Promise((resolve, reject) => {\n    LZUTF8.compressAsync(data, { outputEncoding }, (result, error) => {\n      if (error) reject(error);\n      else resolve(result);\n    });\n  });\n}\n\nexport function decompress(data, inputEncoding = 'StorageBinaryString') {\n  return new Promise((resolve, reject) => {\n    LZUTF8.decompressAsync(data, { inputEncoding }, (result, error) => {\n      if (error) reject(error);\n      else resolve(result);\n    });\n  });\n}\n\nexport async function decompressPost(post) {\n  makeDate(post);\n  if (post.media) post.media.data = await decompress(post.media.data);\n  await decompressUser(post.user);\n}\n\nexport async function decompressPosts(posts) {\n  for (const post of posts) {\n    await decompressPost(post);\n  }\n}\n\nexport async function decompressComments(comments) {\n  for (const comment of comments) {\n    makeDate(comment);\n    await decompressUser(comment.user);\n  }\n}\n\nexport async function decompressUser(user) {\n  if (user.profilePic) user.profilePic = await decompress(user.profilePic);\n}\n\nexport async function decompressUsers(users) {\n  for (const user of users) {\n    await decompressUser(user);\n  }\n}\n","import React, { Component } from 'react';\nimport './Card.css';\n\nclass Card extends Component {\n\n    render() { \n        return (\n            <div className=\"card\">\n                <header className=\"card__header\">Card Header</header>\n                <div className=\"card__body\">Card Body</div>\n            </div>\n        );\n    }\n}\n \nexport default Card;\n","import http from './httpService';\nimport config from '../config';\n\nconst loadLimit = config.loadLimit;\n\nconst commentApiEndpoint = config.apiUrl + '/comments';\n\nexport function getComments(postId, maxDate, limit = loadLimit) {\n  return http.get(\n    `${commentApiEndpoint}?postId=${postId}&maxDate=${\n      maxDate || ''\n    }&limit=${limit}`\n  );\n}\n\nexport function createComment(comment) {\n  return http.post(commentApiEndpoint, comment);\n}\n\nexport function deleteComment(id) {\n  return http.delete(`${commentApiEndpoint}/${id}`);\n}\n\nexport function likeComment(id) {\n  return http.patch(`${commentApiEndpoint}/${id}`, { liked: true });\n}\n\nexport function unlikeComment(id) {\n  return http.patch(`${commentApiEndpoint}/${id}`, { liked: false });\n}\n","import http from './httpService';\nimport config from '../config';\n\nconst loadLimit = config.loadLimit;\n\nconst userApiEndpoint = config.apiUrl + '/users';\n\nexport function register(user) {\n  return http.post(userApiEndpoint, user);\n}\n\nexport async function getMe() {\n  const { data: me } = await http.get(`${userApiEndpoint}/me`);\n  return me;\n}\n\nexport function updateMe(data) {\n  return http.patch(`${userApiEndpoint}/me`, data);\n}\n\nexport function getUser(id) {\n  return http.get(`${userApiEndpoint}/${id}`);\n}\n\nexport function getFollowing(id, maxDate, limit = loadLimit) {\n  return http.get(\n    `${userApiEndpoint}/${id}/following?maxDate=${maxDate || ''}&limit=${limit}`\n  );\n}\n\nexport function getFollowers(id, maxDate, limit = loadLimit) {\n  return http.get(\n    `${userApiEndpoint}/${id}/followers?maxDate=${maxDate || ''}&limit=${limit}`\n  );\n}\n\nexport function checkLiked(id, type) {\n  return http.get(`${userApiEndpoint}/me/checkLiked/${id}?type=${type}`);\n}\n\nexport function checkFollowing(id) {\n  return http.get(`${userApiEndpoint}/me/checkFollowing/${id}`);\n}\n","export default __webpack_public_path__ + \"static/media/profileDefault.90dc751e.jpg\";","import React from 'react';\nimport profileDefault from '../../images/profileDefault.jpg';\n\nexport default function ProfilePic({\n    src,\n    onClick\n}) {\n    return (\n        <img \n        src={src || profileDefault} \n        alt=\"Profile Pic\" \n        className=\"profile-pic clickable\" \n        onClick={ () => {\n            onClick && onClick()\n        }}\n        style={{\n            width: '4rem',\n            height: '4rem',\n            borderRadius: '100%',\n            marginRight: '10px'\n        }}/>\n    );\n}\n","import React, { useContext } from 'react'\nimport ProfilePic from './ProfilePic';\nimport UserContext from '../../context/UserContext';\nimport { toast } from 'react-toastify';\n\n\nexport default function ContentDetails({\n    profilePicSrc,\n    onProfileClick,\n    username,\n    date\n}) {\n    const { currentUser} = useContext(UserContext);\n\n    return (\n        <div className=\"content-details\">\n            <ProfilePic src={profilePicSrc} onClick={() => {\n                currentUser ? onProfileClick() :\n                toast('Log in to view user profiles')\n            }}/>\n            <span className=\"inline-block user-date\">\n                <span className=\"username\">{ username }</span> <br/>\n                <span className=\"date\">{ date.toDateString() }</span>\n            </span>\n        </div>\n    )\n}","import React, { Component } from 'react';\nimport { BiDotsVerticalRounded } from 'react-icons/bi'\nimport Button from './Button';\nimport './Dropdown.css';\n\nclass Dropdown extends Component {\n    state = { \n        showOptions: false\n    }\n\n    dropdown = React.createRef();\n\n    componentDidMount(){\n        document.addEventListener(\"mousedown\", this.handleOutsideClick)\n    }\n\n    componentWillUnmount(){\n        document.removeEventListener(\"mousedown\", this.handleOutsideClick)\n    }\n\n    handleOutsideClick = event => {\n        if (this.dropdown.current && !this.dropdown.current.contains(event.target))\n            this.setState({ showOptions: false });\n    }\n\n    handleDropdown = () => {\n        let { showOptions } = this.state;\n        showOptions = !showOptions;\n        this.setState({ showOptions });\n    }\n\n    handleOption = option => {\n        this.setState({ showOptions: false });\n        this.props.onOptionSelected(option);\n    }\n\n    render() { \n        const { options } = this.props;\n        const { showOptions } = this.state;\n        return ( \n            <div \n            className=\"dropdown\" \n            ref={this.dropdown}>\n                <div className={`dropdown__content${showOptions ? ' show': ''}`}>\n                    {\n                        options.map(o => {\n                        return <Button \n                        styles={['block', 'corner']}\n                        onClick={() => this.handleOption(o)}\n                        key={o}>\n                            { o }\n                        </Button>\n                        })\n                    }\n                </div>\n                <BiDotsVerticalRounded onClick={this.handleDropdown} className=\"clickable\"/>\n            </div>\n         );\n    }\n}\n \nexport default Dropdown;","import React from 'react';\nimport numeral from 'numeral';\n\nexport default function IconCount({\n    children,\n    count,\n    onClick,\n}) {\n    return (\n        <span \n        className=\"icon-count\"\n        style={{ \n            display: 'flex', \n            }}>\n            <span \n            className={`icon icon--small ${onClick ? 'clickable' : ''}`}\n            onClick={onClick}>{ children }</span>\n            \n            <span style={{ marginLeft: '5px' }}>{ count ? formatCount(count) : null } </span>\n        </span>\n    )\n}\n\nfunction formatCount(count){\n    return count >= 100000 ? \n    numeral(count).format('0a').replace('.0', ''):\n    numeral(count).format('0.0a').replace('.0', '');\n}","import React, { useEffect, useState} from 'react';\nimport { BsHeart, BsHeartFill } from 'react-icons/bs';\n\n\nexport default function Like({\n    initialLike,\n    onLike\n}) {\n    const [liked, setLiked] = useState(false);\n    \n    useEffect(() => {\n        setLiked(initialLike);\n    }, [initialLike]);\n\n    const icon = liked ? <BsHeartFill /> : <BsHeart />;\n\n    return (\n        <span \n        className=\"icon clickable\" \n        onClick={() => {\n            setLiked(!liked);\n            onLike(!liked)\n        }}>{ icon }</span>\n    );\n}","import React from 'react';\nimport { toast } from 'react-toastify';\nimport { likeComment, unlikeComment } from '../../services/commentService';\nimport { checkLiked } from '../../services/userService';\nimport UserContext from '../../context/UserContext';\nimport ContentDetails from '../common/ContentDetails';\nimport Card from '../common/Card';\nimport Dropdown from '../common/Dropdown';\nimport IconCount from '../common/icons/IconCount';\nimport Like from '../common/icons/Like';\n\nclass Comment extends Card {\n    static contextType = UserContext;\n\n    state = {\n        date: new Date(),\n        text: '',\n        user: {}\n    }\n\n    componentDidMount() {\n        this.populateState();\n    }\n\n    async populateState() {\n        const { _id, user, date, text, likes } = this.props.comment;\n        \n        let initialLike;\n        \n        if (this.context.currentUser)\n            initialLike = (await checkLiked(_id, 'comment')).data;\n\n        this.setState({ \n            _id, \n            user, \n            date, \n            text, \n            likes, \n            initialLike,\n        });\n    }\n\n    handleLike = async (liked) => {\n        if (!this.context.currentUser){\n            toast('Log in to save liked content');\n            return\n        }\n\n        try {\n            const id = this.state._id;\n\n            const { data: likeObj } = liked ? \n            await likeComment(id) :\n            await unlikeComment(id);\n            \n            const { likes } = likeObj;\n            // this.context.onLike(comment._id, 'comment', liked);\n            this.setState({ likes });\n        } catch (ex) {\n            if (ex.response){\n                const status = ex.response.status;\n                if (status === 400)\n                    console.log(`Error liking comment: ${ex.response.data}`);\n                else if (status === 404)\n                    toast.error(\"Comment not found. Refresh to get latest content\");\n            }\n        }\n    }\n\n    handleOptionSelected = option => {\n        const { onProfileClick, onDelete, onFollow } = this.props;\n        const { user, _id } = this.state;\n\n        if (option === 'Profile')\n            onProfileClick(user._id);\n        else if (option === 'Follow' || option === 'Unfollow')\n            onFollow(user._id);\n        else if (option === 'Delete')\n            onDelete(_id);\n    }\n\n    render() { \n        const { text, user, likes, date, initialLike } = this.state;\n        const { \n            onProfileClick, \n            following,\n            optionMenu,\n            hideOptions \n        } = this.props;\n        const followingUser = following[user._id];\n        const { currentUser } = this.context;\n        const options = optionMenu || ['Profile'];\n        if (!optionMenu && !hideOptions)  {\n            currentUser &&\n            (currentUser._id === user._id ?\n                options.push('Delete'):\n                options.push(followingUser ? 'Unfollow' : 'Follow')\n            )\n        }\n\n        return (\n        <div className=\"card comment\">\n            <header className=\"card__header post__header\">\n                <ContentDetails \n                profilePicSrc={user.profilePic}\n                onProfileClick={() => onProfileClick(user._id)} \n                username={user.username} \n                date={date}/>\n                {\n                    !hideOptions &&\n                    <Dropdown options={options} onOptionSelected={this.handleOptionSelected}/>\n                }\n            </header>\n            <div className=\"card__body comment__body\">\n                <p>\n                    { text }\n                </p> \n                <div className=\"comment__details\">\n                    <IconCount count={likes}>\n                      <Like onLike={this.handleLike} initialLike={initialLike}/>\n                    </IconCount>\n                </div>\n            </div>\n        </div>\n        );\n    }\n}\n \nexport default Comment;","import React from 'react';\nimport Comment from './Comment';\nimport Button from '../common/Button';\n\nconst Comments = ({\n    comments,\n    onDelete,\n    onProfileClick,\n    onFollow,\n    loadMore,\n    onLoadMore,\n    following,\n    optionMenu,\n    hideOptions\n}) => {\n    return (\n        <div className=\"comments\">\n            {\n                comments.map(comment => {\n                    return (\n                        <Comment\n                        key={comment._id} \n                        comment={comment}\n                        onDelete={onDelete}\n                        onProfileClick={onProfileClick}\n                        onFollow={onFollow}\n                        following={following}\n                        hideOptions={hideOptions}\n                        optionMenu={optionMenu}\n                        />\n                    )\n                })\n            }\n            {\n                loadMore &&\n                <div className=\"load-more-container\">\n                    <Button\n                    color=\"secondary\"\n                    size=\"small\"\n                    onClick={onLoadMore}>\n                        Load More\n                    </Button>\n                </div>\n            }       \n        </div>\n    )\n}\n\n\nexport default Comments;","import React, { Component } from 'react'\nimport TextBox from '../common/TextBox';\nimport Button from '../common/Button';\n\nclass CreateCommentBox extends Component {\n    \n    text = ''\n\n    state = { }\n\n    handleTextChange = text => {\n        this.text = text;\n        if (this.state.clear)\n            this.setState({ clear: false });\n    }\n\n    handleCreate = () => {\n        this.props.onCreate(this.text);\n        this.text = '';\n        this.setState({ clear: true  });\n    }\n\n    render() { \n        const { alert } = this.props;\n        const { clear } = this.state;\n\n        return ( \n            <div className=\"create-comment\">\n                <TextBox \n                name=\"commentText\"\n                placeholder=\" Comment on this post...\"\n                className=\"text-box create-comment-text-box\"\n                onTextChange={this.handleTextChange}\n                clear={clear}\n                // Pass down alert so that it is aligned with text box\n                type=\"textarea\"\n                alert={alert}/>\n\n                <Button\n                color=\"accent\"\n                size=\"small\"\n                onClick={this.handleCreate}>\n                    Comment\n                </Button>\n            </div>\n         );\n    }\n}\n \nexport default CreateCommentBox;","import React from 'react'\nimport { toast } from 'react-toastify';\nimport Card from '../common/Card';\nimport Comments from '../comments/Comments';\nimport ContentDetails from '../common/ContentDetails';\nimport IconCount from '../common/icons/IconCount';\nimport Dropdown from '../common/Dropdown';\nimport Media from '../common/Media';\nimport Like from '../common/icons/Like';\nimport { GoComment } from 'react-icons/go';\nimport { makeDate } from '../../utils/makeDate';\nimport { createComment, deleteComment, getComments } from '../../services/commentService';\nimport { likePost, unlikePost } from '../../services/postService';\nimport CreateCommentBox from '../comments/CreateCommentBox';\nimport UserContext from '../../context/UserContext';\nimport { checkLiked } from '../../services/userService';\nimport { decompressComments } from '../../utils/media';\nimport config from '../../config';\n\nconst loadLimit = config.loadLimit;\n\nclass Post extends Card {\n\n    static contextType = UserContext;\n\n    state = { \n        user: {},\n        date: new Date(),\n        comments: []\n    } \n\n    componentDidMount() {\n        this.populateState();\n    }\n\n    async populateState(){\n        const { _id, user, date, text, media, comments, numberOfComments, likes } = this.props.post;\n        const loadMore = (comments || []).length >= loadLimit;\n\n        const { currentUser } = this.context;\n\n        let initialLike;\n        \n        if (currentUser)\n            initialLike = (await checkLiked(_id, 'post')).data;\n\n        this.setState({ \n            _id,\n            user, \n            date: date || new Date(), \n            text, \n            media, \n            comments: comments || [],\n            numberOfComments,\n            likes: likes,\n            loadMore,\n            initialLike,\n        });\n    }\n\n    handleDeleteComment = async (id) => {\n        try {\n            const { _id, numberOfComments, comments: oldComments } = this.state;\n            await deleteComment(id);\n            const { data: replacement } = await getComments(\n                _id, \n                oldComments[oldComments.length - 1].date,\n                1)\n\n            await decompressComments(replacement);\n\n            const comments = oldComments\n            .filter(c => c._id !== id)\n            .concat(replacement);\n\n            this.setState({ \n                comments, \n                numberOfComments: numberOfComments - 1,\n                loadMore: replacement.length !== 0 \n            });\n        } catch (ex){\n            if (ex.response){\n                const status = ex.response.status;\n                if (status === 401)\n                    toast.warning(\"Can only delete your own posts/comments\");\n                else if (status === 404)\n                    toast.error(\"Comment not fond. Refresh to get latest content\");\n            }        \n        }\n    }\n\n    handleCreateComment = async (text) => {\n        const { currentUser } = this.context;\n        if (!currentUser){\n            toast('Log in to comment');\n            return\n        }\n        if (!text.trim()){\n            this.setState({ \n                alert: { type: 'secondary', message: \"Comment can't be empty\" }\n            });\n            return;\n        }\n\n        if (text.length > 3000){\n            this.setState({ \n                alert: { type: 'secondary', message: \"Text can be at most 3,000 characters\" } \n            });\n            return;\n        }\n\n        try {\n            const { _id: postId, numberOfComments } = this.state;\n            const newComment = {\n                postId,\n                text\n            };\n            const { data: comment } = await createComment(newComment);\n            makeDate(comment);\n            comment.user.profilePic = currentUser.profilePic;\n\n            const comments = [...this.state.comments];\n            comments.unshift(comment);\n\n            this.setState({ \n                comments, \n                alert: null,\n                numberOfComments: numberOfComments + 1\n            });\n        } catch (ex) {\n            toast.error('Some went wrong commenting');\n        }\n    }\n\n    handleLike = async (liked) => {\n        if (!this.context.currentUser){\n            toast('Log in to save liked content');\n            return;\n        }\n        try {\n            const id = this.state._id;\n\n            const { data: likeObj } = liked ? \n            await likePost(id):\n            await unlikePost(id);\n            \n            const { likes } = likeObj;\n            \n            if (this.props.onLike)\n                this.props.onLike(id);\n            // this.context.onLike(post._id, 'post', liked);\n            this.setState({ likes });\n\n        } catch (ex) {\n            if (ex.response){\n                const status = ex.response.status;\n                if (status === 400)\n                    console.log(`Error liking post: ${ex.response.data}`);\n                else if (status === 404)\n                    toast.error(\"Post not found. Refresh to get latest content\");\n            }\n        }\n    \n    }\n\n    handleOptionSelected = option => {\n        const { onProfileClick, onDelete, onFollow } = this.props;\n   \n        const { user, _id } = this.state;\n\n        if (option === 'Profile')\n            onProfileClick(user._id);\n        else if (option === 'Follow' || option === 'Unfollow')\n            onFollow(user._id)\n        else if (option === 'Delete')\n            onDelete(_id);\n    }\n\n    handleLoadMore = async () => {\n        const { _id, comments } = this.state;\n        let { data: moreComments } = await getComments(\n            _id, \n            comments[comments.length - 1].date\n            );\n\n        await decompressComments(moreComments);\n\n        const combinedComments = comments.concat(moreComments);\n\n        this.setState({ \n            comments: combinedComments, \n            loadMore: moreComments.length >= loadLimit });\n    }   \n\n    render() {\n        const { \n            _id,\n            text, \n            media, \n            user, \n            date,\n            numberOfComments,\n            comments,\n            likes,\n            initialLike,\n            loadMore,\n            alert\n        } = this.state;\n        const { \n            showComments,\n            onPostClick,\n            onProfileClick,\n            following,\n            onFollow,\n            optionMenu,\n            hideOptions\n            } = this.props;\n\n        const followingUser = following[user._id];\n        const { currentUser } = this.context;\n        const options = optionMenu || ['Profile'];\n        if (!optionMenu && !hideOptions)  {\n            currentUser &&\n            (currentUser._id === user._id ?\n                options.push('Delete'):\n                options.push(followingUser ? 'Unfollow' : 'Follow')\n            )\n        }\n\n        return (\n            <React.Fragment>\n              <div className=\"card post\">\n                <header className=\"card__header post__header\">\n                  <ContentDetails \n                  profilePicSrc={user.profilePic}\n                  onProfileClick={() => onProfileClick(user._id)} \n                  username={user.username} \n                  date={date}/>\n                  {\n                      !hideOptions && \n                      <Dropdown options={options} onOptionSelected={this.handleOptionSelected}/>\n                  }\n                </header>\n                <div className=\"card__body post__body\">\n                  { text && \n                    <p>\n                       { text }\n                    </p> \n                  }\n                  {\n                    media && \n                    <Media \n                    type={media.mediaType}\n                    src={media.data}\n                    alt={'Post media: ' + media.mediaType}/> \n                  }\n                  <div className=\"post__details\">\n                    <IconCount \n                    count={likes}>\n                      <Like initialLike={initialLike} onLike={this.handleLike}/>\n                    </IconCount>\n\n                    <IconCount \n                    count={numberOfComments} \n                    onClick={onPostClick && (() => onPostClick(_id)) }>\n                      <GoComment />\n                    </IconCount>\n                  </div>\n                </div>\n              </div>\n              {\n                showComments &&\n                <div className=\"comments-container\">\n                    <CreateCommentBox \n                    onCreate={this.handleCreateComment}\n                    alert={ alert }/>\n                    \n                    <Comments \n                    comments={comments} \n                    onDelete={this.handleDeleteComment}\n                    onProfileClick={onProfileClick}\n                    onFollow={(userId) => onFollow(userId)}\n                    onLoadMore={this.handleLoadMore}\n                    loadMore={loadMore}\n                    following={following}\n                    hideOptions={!currentUser}/>\n                </div>\n              }         \n            </React.Fragment>\n        );\n    }\n}\n\n\nexport default Post;","import { checkFollowing } from '../services/userService';\n\nexport async function getFollowings(objs) {\n  const following = {};\n  for (const obj of objs) {\n    const userId = obj.user._id;\n    if (!(userId in following)) {\n      const { data: followingUser } = await checkFollowing(userId);\n      following[userId] = followingUser;\n    }\n  }\n  return following;\n}\n","import React, { useState, useEffect, useContext } from 'react';\nimport Post from './Post';\nimport Button from '../common/Button';\nimport { updateMe } from '../../services/userService';\nimport { getFollowings } from '../../utils/following';\nimport UserContext from '../../context/UserContext'\n\nconst Posts = ({\n    posts,\n    onFollow,\n    onLike,\n    onPostClick,\n    onProfileClick,\n    onDelete,\n    onLoadMore,\n    loadMore,\n    showComments,\n    optionMenu,\n    hideOptions\n}) => {\n    const [following, setFollowing] = useState({});\n    const  { currentUser } = useContext(UserContext)\n\n    useEffect(() => {\n        async function doGetFollowings(){\n            let following = await getFollowings(posts);\n            if (showComments){\n                following = {\n                    ...following, \n                    ...await getFollowings(posts[0].comments)\n                };\n            }\n            setFollowing(following);\n        }\n\n        currentUser && doGetFollowings();\n\n    }, [posts, showComments, currentUser]);\n\n    const handleFollow = async (userId) => {\n        const newFollowing = {...following};\n        const isFollowing = following[userId];\n        await updateMe({ following: { id: userId, follow: !isFollowing } });\n        if (isFollowing)\n            delete newFollowing[userId];\n        else\n            newFollowing[userId] = 1;\n\n        setFollowing(newFollowing);\n    }\n\n    return (\n        <div className=\"posts\">\n            {\n                posts.map(post => {\n                    return (\n                        <Post \n                        key={post._id}\n                        post={post}\n                        onPostClick={onPostClick}\n                        onProfileClick={onProfileClick}\n                        onDelete={onDelete}\n                        onFollow={ \n                            (userId) => {\n                                handleFollow(userId);\n                                onFollow && onFollow(userId);\n                            }\n                        }\n                        onLike={onLike}\n                        following={following}\n                        showComments={showComments}\n                        optionMenu={optionMenu}\n                        hideOptions={hideOptions}/>\n                    )\n                })\n            }\n            {\n                loadMore &&\n                <div className=\"load-more-container\">\n                    <Button\n                    color=\"secondary\"\n                    size=\"small\"\n                    onClick={onLoadMore}>\n                        Load More\n                    </Button>\n                </div>\n            }       \n        </div>\n    )\n}\n\nexport default Posts;","import React, { Component } from 'react';\nimport { toast } from 'react-toastify';\n\nimport PostSearch from './PostSearch';\nimport CreatePostBox from './CreatePostBox';\n\nimport { getPosts, deletePost, createPost } from '../../services/postService';\n\nimport { makeDate } from '../../utils/makeDate';\n\nimport UserContext from '../../context/UserContext';\nimport { readMedia, compress, decompressPosts } from '../../utils/media';\nimport './PostsPage.css';\nimport Posts from './Posts';\nimport config from '../../config';\n\nconst loadLimit = config.loadLimit;\n\nclass PostsPage extends Component {\n    static contextType = UserContext;\n\n    state = {\n        posts: null,\n        emptyPost: false,\n    }\n\n    relativeDates = ['Today', 'Yesterday', 'Last 7 Days', 'Last 30 Days']\n\n    filterMap = {\n        username: 'Username',\n        likedPosts: 'Liked Posts',\n        following: 'Following',\n        daysAgo: 'Date (Day)',\n        dateRange: 'Date Range'\n    }\n\n    componentDidMount() {\n        // console.log('postsPage componentDidMount()');\n        window.addEventListener('resize', this.resize);\n        this.resize();\n        this.populatePosts();\n    }\n\n    resize = () => {\n        const mobile = window.innerWidth < 1000;\n        if (this.state.mobile !== mobile) \n            this.setState({ mobile });\n    }\n\n    componentWillUnmount(){\n        window.removeEventListener('resize', this.resize);\n    }\n\n    populatePosts = async () => {\n        try {\n            const { data: posts } = await getPosts({});\n            await decompressPosts(posts);\n\n            this.setState({ posts, loadMore: posts.length >= loadLimit });\n        } catch (ex) {\n            // Axios will catch any unexpected erros\n        }\n    }\n\n    handleLoadMore = async () => {\n        const { filter, filterData, posts } = this.state;\n        let { data: morePosts } = await getPosts({ \n            filter,\n            filterData,\n            maxDate: posts[posts.length -1 ].date\n        });\n\n        await decompressPosts(morePosts);\n\n        const combinedPosts = posts.concat(morePosts);\n      \n        this.setState({ \n            posts: combinedPosts, \n            loadMore: morePosts.length >= loadLimit\n         });\n\n    }   \n\n    handleLike = async (postId) => { \n        if (this.state.filter !== 'likedPosts') return;\n        // At this point, the filter is likedPosts and one of them must have been unliked\n        const { filter, filterData, posts: oldPosts } = this.state;\n\n        const { data: replacement } = await getPosts({ \n            filter, \n            filterData, \n            maxDate: oldPosts[oldPosts.length - 1 ].date,\n            limit: 1\n        });\n\n        await decompressPosts(replacement);\n\n        const posts = oldPosts\n        .filter(post => post._id !== postId)\n        .concat(replacement);\n        \n\n        this.setState({\n            posts,\n            loadMore: replacement.length !== 0\n        });\n    }\n\n    handleFollow = async (userId) => {\n        if (this.state.filter !== 'following') return;\n        // At this point, the filter is following and one of them must have been unfollowed\n        let { filter, filterData, posts: oldPosts } = this.state;\n        const oldLength = oldPosts.length;\n\n        const filteredPosts = oldPosts.filter(post => post.user._id !== userId);\n\n        const { data: replacement } = await getPosts({ \n            filter, \n            filterData, \n            maxDate: oldPosts[oldPosts.length - 1 ].date,\n            limit: oldLength - filteredPosts.length\n        });\n\n        await decompressPosts(replacement);\n\n        const posts = filteredPosts.concat(replacement);\n\n        this.setState({\n            posts,\n            loadMore: replacement.length !== 0\n        });\n    }\n\n    handleDelete = async id => {\n        try {\n            const { filter, filterData, posts: oldPosts } = this.state;\n            await deletePost(id);\n            const { data: replacement } = await getPosts({ \n                filter, \n                filterData, \n                maxDate: oldPosts[oldPosts.length - 1 ].date, \n                limit: 1\n            });\n\n            await decompressPosts(replacement);\n\n            const posts = oldPosts\n            .filter(post => post._id !== id)\n            .concat(replacement);\n\n            this.setState({ posts, loadMore: replacement.length !== 0 });\n        } catch (ex) {\n            if (ex.response){\n                const status = ex.response.status;\n                if (status === 401)\n                    toast.warn(\"You can only delete your own posts/comments\");\n                else if (status === 404)\n                    toast.error(\"Post not found. Refresh to get latest content\");\n            }\n        }\n    }\n\n    handleCreate = async (text, media) => {\n        const { currentUser } = this.context;\n        \n        if (!currentUser){\n            toast('Log in to post');\n            return\n        }\n\n        if ( !(text.trim() || media) ) {\n            if (!this.state.emptyPost)\n                this.setState({ \n                    alert: { type: 'secondary', message : \"Post can't be empty\" }\n                 }); // avoid rerender of posts\n            return;\n        }\n\n        if (text.length > 3000){\n            this.setState({ \n                alert: { type: 'secondary', message: \"Text can be at most 3,000 characters\" }\n            });\n            return;\n        }\n\n        const newPost = {\n            text\n        };\n\n        let mediaData;\n        let compressedData;\n\n        if (media){\n            mediaData =  await readMedia(media.src);\n            compressedData = await compress(mediaData);\n            newPost.media = { \n                mediaType: media.type, \n                data: compressedData\n            };\n        }\n\n        try {\n            const { data: post } = await createPost(newPost);\n            makeDate(post);\n\n            if (media)\n                post.media.data = mediaData;\n            post.user.profilePic = currentUser.profilePic;\n            const posts = [...this.state.posts];\n            posts.unshift(post);\n\n            this.setState({ \n                posts, \n                alert: null\n                });\n        } catch (ex) {\n            // REVISIT\n            if (ex.response && ex.response.status === 400)\n                toast.error('Something went wrong creating post');\n        }\n    }\n\n    handleSearchByUsername = async text => { \n        const trimmed = text.trim().toLowerCase();\n        const filter = trimmed ? 'username' : undefined;\n        const { data: posts } = await getPosts({\n            filter,\n            filterData: trimmed,\n        });\n        await decompressPosts(posts);\n        this.setState({\n            posts,\n            filter,\n            filterData: trimmed,\n            loadMore: posts.length >= loadLimit,\n            relativeDate: null,\n        });\n    }\n\n    handlePostType = async type => {\n        let filter;\n        const { _id } = this.context.currentUser;\n        if (type === 'Liked Posts')\n            filter = 'likedPosts';\n        else if (type === 'Following')\n            filter = 'following';\n\n        const { data: posts } = await getPosts({ \n            filter, \n            filterData: _id,\n        });\n\n        await decompressPosts(posts);\n\n        this.setState({\n            posts,\n            filter,\n            filterData: _id,\n            loadMore: posts.length >= loadLimit,\n            relativeDate: null\n        })\n    }\n\n    handleDateSelected = async date => {\n        let daysAgo;\n        const filter = 'daysAgo';\n\n        if (date === 'Today')\n            daysAgo = 0;\n        else if (date === 'Yesterday')\n            daysAgo = 1;\n        else if (date.match(/Last \\d+ Days/i))\n            daysAgo = date.split(' ')[1];\n\n        const { data: posts } = await getPosts({ \n            filter,\n            filterData: daysAgo,\n        });\n\n        await decompressPosts(posts);\n\n        this.setState({\n            posts,\n            filter,\n            filterData: daysAgo,\n            loadMore: posts.length >= loadLimit,\n            relativeDate: date\n        });\n    }\n\n    handleDateRange = async (start, end) => {\n       const filter = 'dateRange';\n       const filterData = start + ',' + end;\n\n       const { data: posts } = await getPosts({\n           filter,\n           filterData,\n       });\n       await decompressPosts(posts);\n       this.setState({\n            posts,\n            filter,\n            filterData,\n            loadMore: posts.length >= loadLimit,\n            relativeDate: null\n       });\n    }\n\n    handlePostClick = id => {\n        this.props.history.push(`/posts/${id}`);\n    }\n\n    handleProfileClick = id => {\n        this.props.history.push(`/profile/${id}`);\n    }\n\n    handleShowSearch = () => {\n        this.setState({ showSearch: !this.state.showSearch });\n    }\n\n    handleClearFilter = async () => {\n        const { data: posts } = await getPosts({ });\n        await decompressPosts(posts);\n        this.setState({\n            posts,\n            filter: null,\n            filterData: null,\n            loadMore: posts.length >= loadLimit,\n            relativeDate: null,\n        });\n    }\n\n    clearFilterComponent = filter => {\n    return (\n        <div>\n            <span \n            className=\"clickable\"\n            onClick={() => this.handleClearFilter()}>\n                Clear Filter: \n            </span>\n            <span \n            style={{ \n                color: 'var(--color-accent)',\n                marginLeft: '5px'\n            }}>\n                { this.filterMap[filter] }\n            </span>\n        </div>\n    )\n    }\n\n\n    filterComponent = text => {\n        return <span className=\"clickable\" onClick={this.handleShowSearch}>{ text }</span>;\n    }\n\n    render() {  \n        const { \n            posts, \n            mobile, \n            showSearch,\n            loadMore,\n            filter,\n            relativeDate,\n            alert } = this.state;\n        \n        const { currentUser } = this.context;\n\n        if (!posts) \n            return (\n                <p style={{ \n                    textAlign: 'center',\n                    paddingTop: 'calc(var(--nav-height) * 2)'  \n                }}>Loading posts...</p>\n            );\n        return (\n            <div className=\"page posts-page\">\n                {\n                    mobile &&\n                    <div\n                    style={{\n                    display: 'flex',\n                    width: '100%',\n                    maxWidth: '500px',\n                    justifyContent: showSearch ? 'flex-end' : (filter ? 'space-between' : 'flex-end'),\n                    padding: '10px 20px',\n                    }}>\n                    {\n                    showSearch ? \n                    this.filterComponent('See results') :\n                    <React.Fragment>\n                        { filter && this.clearFilterComponent(filter) }\n                        { this.filterComponent('Filter') }\n                    </React.Fragment>\n                    }\n                </div>\n                }\n                <div \n                className={ \"post-search-container \" + \n                (mobile ?\n                    (showSearch ? \n                    'animate__animated animate__fadeIn' : \n                    'hide' \n                    ) :\n                    ''\n                )\n                }>\n                    {\n                    <PostSearch \n                    searchByUsername={this.handleSearchByUsername}\n                    dates={this.relativeDates} \n                    selectedDate={relativeDate}\n                    onDateSelected={this.handleDateSelected}\n                    onDateRange={this.handleDateRange}\n                    onPostType={this.handlePostType}\n                    />\n                    }\n                </div>\n                <div \n                className={\n                    \"posts-container \" + \n                    (mobile ?\n                        (!showSearch ? \n                        'animate__animated animate__fadeIn' : \n                        'hide' \n                        ) :\n                        ''\n                    )\n                    }>\n                        {\n                            !mobile && filter && this.clearFilterComponent(filter)\n                        }\n                        {\n                            !filter &&\n                            <CreatePostBox \n                            onCreate={this.handleCreate}\n                            alert={alert}/>\n                        }\n                    \n                    {\n                    !posts.length ? \n                    <p style={{ textAlign: 'center' }}>No posts found</p> :\n                    <Posts\n                    posts={posts}\n                    onPostClick={this.handlePostClick}\n                    onProfileClick={this.handleProfileClick}\n                    onDelete={this.handleDelete}\n                    onLoadMore={this.handleLoadMore}\n                    loadMore={loadMore}\n                    onLike={this.handleLike}\n                    onFollow={this.handleFollow}\n                    hideOptions={!currentUser}\n                    />\n                    }\n                </div>\n            </div>\n        );\n  \n    }\n}\n \nexport default PostsPage;\n","import React from 'react';\n\nexport default function NotFound() {\n    return (\n        <h2 className=\"center\" style={{ padding: 10 }}>Unable to find the page you're looking for</h2>\n    );\n}\n","import React, { Component } from 'react';\nimport { toast } from 'react-toastify';\nimport Posts from './Posts';\n\nimport { getPost, deletePost } from '../../services/postService';\nimport { decompressPost, decompressComments } from '../../utils/media';\nimport './PostsPage.css';\nimport { getComments } from '../../services/commentService';\nimport UserContext from '../../context/UserContext';\n\nclass PostPage extends Component {\n\n    static contextType = UserContext\n\n    state = {\n        post: null,\n    }\n\n    componentDidMount(){\n        // console.log('postPage componentDidMount()');\n        this.setPost();\n    }\n\n    async setPost() {\n        try {\n            const { id: postId } = this.props.match.params;\n            const { data: post } = await getPost(postId);\n            const { data: comments } = await getComments(postId);\n            post.comments = comments;\n            await decompressPost(post);\n            await decompressComments(post.comments);\n            \n            this.setState({ post });\n        } catch (ex) { \n            if (ex.response && ex.response.status === 404)\n                this.props.history.replace('/not-found'); // don't want to be able to go back to invalid post\n        } \n    }\n\n    handleDelete = async (id) => {\n        try {\n            await deletePost(id);\n            this.props.history.replace('/');\n        } catch (ex) {\n            if (ex.response){\n                const status = ex.response.status;\n                if (status === 401)\n                    toast.warn(\"You can only delete your own posts/comments\");\n                else if (status === 404)\n                    toast.error(\"Post not found. Try refresshing\");\n            }\n        }\n    }\n\n    handleProfileClick = id => {\n        this.props.history.push(`/profile/${id}`);\n    }\n\n    render() { \n        const { post } = this.state;\n        const { currentUser } = this.context;\n\n        if (!post) return null;\n        \n        return (\n            <div className=\"page post-page\">\n                <div className=\"posts-container\">\n                    <Posts \n                    posts={[post]}\n                    showComments={true}\n                    onProfileClick={this.handleProfileClick}\n                    onDelete={this.handleDelete}\n                    hideOptions={!currentUser}\n                    />\n                </div>\n            </div>\n        );\n    }\n}\n \nexport default PostPage;","export function makeAlert(type, message) {\n  return <div className={'alert alert--' + type}>{message}</div>;\n}\n","import React, { Component, useState } from 'react';\nimport { makeAlert } from '../../utils/alert';\nimport { BsEye, BsEyeSlash } from 'react-icons/bs'\n\nclass FormInput extends Component {\n    \n    render() {\n        const { name, label, onChange, alert,  inputType, ...rest} = this.props;\n        // console.log('Default value: ', rest);\n        return ( \n            <div className=\"form__group\">\n                <label htmlFor={name} className=\"label\">{ label }</label>\n                {\n                    inputType === 'textarea' ?\n                    <textarea\n                    {...rest}\n                    id={name}\n                    className=\"text-box\"\n                    name={name}\n                    onChange={(e) => onChange(e)}/> :\n                    {\n                        ...rest.type === 'password' ?\n                        <PasswordInput\n                        {...rest}\n                        name={name}\n                        onChange={onChange}/> :\n                        <input \n                        {...rest}\n                        id={name}\n                        className=\"text-box\"\n                        name={name}\n                        onChange={(e) => onChange(e)}/>\n                    }\n                    \n                }\n                {\n                    alert && makeAlert(alert.type, alert.message)\n                }\n                \n            </div>\n         );\n    }\n    \n}\n\nconst PasswordInput = ({\n    name, \n    onChange,\n    type,\n    ...rest\n}) => {\n    const [showPassword, setShowPassword] = useState(false);\n\n    return (<div className=\"input-group\">\n        <input \n        {...rest}\n        id={name}\n        type={showPassword ? 'text' : 'password'}\n        className=\"text-box\"\n        name={name}\n        onChange={(e) => onChange(e)}>\n            \n        </input>\n        \n        <span className=\"icon icon--small clickable\"\n        onClick={() => setShowPassword(!showPassword)}>\n            {\n                showPassword ?\n                <BsEye /> :\n                <BsEyeSlash />\n            }\n        </span>\n\n    </div>)\n}\n \nexport default FormInput;","import React, { Component } from 'react'\nimport Joi from 'joi-browser';\nimport FormInput from './FormInput';\nimport Button from './Button';\nimport './Form.css';\n\nclass Form extends Component {\n    state = { \n        errors: {},\n        data: {}\n     }\n\n    data = {}\n\n\n\n     renderButton = label => {\n        return (\n            <Button\n            styles={['rounded', 'block']}\n            color=\"primary\">\n                {label}\n            </Button>\n        );\n     }\n\n     renderInput = (name, label, options={}) => {\n        const { errors } = this.state;\n        // console.log(options)\n\n        const alert = !errors[name] ? null : { type: 'primary', message: errors[name]};\n\n        // console.log('renderInput(): data: ', data);\n\n        // console.log('option: ', options);\n\n        return <FormInput \n        {...options}\n        name={name}\n        label={label}\n        onChange={this.handleChange}\n        className=\"text-box\"\n        alert={alert}/>;\n     }\n\n     validate = () => {\n        // const options = { abortEarly: false };\n        const { error } = Joi.validate(this.data, this.schema);\n\n        if (!error)\n            return null;\n\n        const errors = {};\n\n        for (let item of error.details){\n            errors[item.path[0]] = item.message;\n        }\n\n        // console.log(errors);\n\n        return errors;\n    }\n\n    handleSubmit = e => {\n        e.preventDefault(); // to prevent reloading\n\n        const errors = this.validate();\n\n        this.setState({ errors: errors || {} });\n\n        if (errors) return; // don't want to call server\n\n        this.doSubmit();\n    }\n\n    doSubmit = () => {\n        // console.log('doSubmit() in base class called');\n    }\n\n    validateProperty = ({ name, value }) => {\n        const obj = { [name]: value} ;\n        const schema = { [name]: this.schema[name]};\n        const { error } = Joi.validate(obj, schema);\n\n        return error ? error.details[0].message : null;\n        \n    }\n\n    handleChange = ({ currentTarget: input }) => { // e.currentTarget\n        this.data[input.name] = input.value;\n        /*\n        const errors = {...this.state.errors};\n\n        \n        const data = {...this.state.data}; \n        data[input.name] = input.value;\n\n        // console.log(errors);\n        this.setState({ data, errors });\n        */\n    }\n\n}\n \nexport default Form;","import http from './httpService';\nimport config from '../config';\n\nlet tokenKey = 'loginToken';\nconst authApiEndpoint = config.apiUrl + '/auth';\n\n// get rid of bi-directional dependency\n\nhttp.setJwt(getJwt());\n\nexport function getJwt() {\n  return localStorage.getItem(tokenKey);\n}\n\nexport async function login(email, password) {\n  const { data: jwt } = await http.post(authApiEndpoint, { email, password });\n  localStorage.setItem(tokenKey, jwt);\n  http.setJwt(getJwt());\n}\n\nexport function loginWithJwt(jwt) {\n  localStorage.setItem(tokenKey, jwt);\n  http.setJwt(getJwt());\n}\n\nexport function logout() {\n  localStorage.removeItem(tokenKey);\n}\n\nexport function hasCurrentUser() {\n  return localStorage.getItem(tokenKey) !== null;\n}\n\nconst auth = {\n  login,\n  logout,\n  hasCurrentUser,\n  loginWithJwt,\n  getJwt,\n};\n\nexport default auth;\n","export default __webpack_public_path__ + \"static/media/sbk_image.42ab24f7.svg\";","import React from 'react';\nimport { Redirect } from 'react-router-dom';\nimport Joi from 'joi-browser';\nimport _ from 'lodash';\nimport Form from './common/Form';\nimport auth from '../services/authService';\nimport UserContext from '../context/UserContext';\nimport { makeAlert } from '../utils/alert';\nimport sbkImage from '../images/sbk_image.svg';\n\nclass Login extends Form {\n    static contextType = UserContext;\n\n    data = { email: '', password: ''}\n\n    state = {\n        errors: {},\n        alert: null,\n    }\n\n    schema = {\n        email: Joi.string().email().required().label('Email'),\n        password: Joi.string().min(8).required().label('Password')\n    }\n\n    doSubmit = async () => {\n        try {\n            const { email, password } = this.data;\n\n            await auth.login(email, password);\n\n            await this.context.onLogin(); // notify App that jwt is set\n\n            const { state } = this.props.location;\n            window.location = state ? state.from.pathname : '/'; // cause full reload because app's cdm() only called once \n            // toast.info(jwt);\n            \n        } catch (ex) {\n            if (ex.response && ex.response.status === 400){\n                const alert = makeAlert('primary', ex.response.data);\n                this.setState({ alert });\n            }\n        }\n    }\n\n    render() {\n        if (auth.hasCurrentUser()) return <Redirect to=\"/\"/>;\n\n        const { alert, errors } = this.state;\n        return (\n            <div className=\"page login-page page-form\">\n                <img src={sbkImage} alt=\"\"/>\n                <form className=\"form\" onSubmit={this.handleSubmit}>\n                    <h2>Login</h2>\n                    {  _.isEmpty(errors) && alert }\n                    {this.renderInput('email', 'Email', { autoFocus: true })}\n                    {this.renderInput('password', 'Password', { type: 'password' })}\n                    {this.renderButton('Login')}\n                </form>\n            </div>\n        )\n    }\n\n}\n\nexport default Login;","import React  from 'react'\nimport { Route, Redirect } from 'react-router-dom';\nimport auth from '../../services/authService';\n\nconst ProtectedRoute = (props) => {\n    const { component: Component, render, ...rest } = props;\n    return ( \n        <Route // protected route\n              {...rest}\n              render={(props) => {\n                if (!auth.hasCurrentUser()) return <Redirect to={{\n                    pathname: '/login',\n                    state: { from: props.location }\n                }} />;\n                return Component ? <Component {...props} /> : render(props);\n              }}\n            />\n     );\n}\n \nexport default ProtectedRoute;","import React, { Component } from 'react'\nimport { Link } from 'react-router-dom';\nimport auth from '../services/authService';\nimport UserContext from '../context/UserContext';\nimport './Navbar.css';\nimport { GoCommentDiscussion } from 'react-icons/go';\n\nclass NavBar extends Component {\n    static contextType = UserContext\n\n    render() { \n        const { currentUser } = this.context;\n        return ( \n            <nav className=\"navbar\">\n                <Link className=\"navbar__brand\" to=\"/posts\">\n                    <span className=\"icon\">\n                        <GoCommentDiscussion />\n                    </span>\n                    SBKonnect\n                </Link>\n                <ul className=\"list list-inline nav__items\">\n                    {\n                        auth.hasCurrentUser() ?\n                        <React.Fragment>\n                            <Link className=\"list__item nav__item\" to={`/profile/${currentUser._id}`}>\n                                Profile\n                            </Link>\n                            <Link className=\"list__item nav__item\" to=\"/logout\">\n                                Logout\n                            </Link>\n                        </React.Fragment> :\n                        <React.Fragment>\n                            <Link className=\"list__item nav__item\" to=\"/register\">Register</Link>\n                            <Link className=\"list__item nav__item\" to=\"/login\">Login</Link>\n                        </React.Fragment> \n                    }\n                    {\n                        !auth.hasCurrentUser() && <Link className=\"list__item nav__item\" to=\"/posts\">Posts</Link>\n                    }\n                </ul>\n            </nav>\n         );\n    }\n}\n \nexport default NavBar;\n","import { Component } from 'react'\nimport auth from '../services/authService';\n\nclass Logout extends Component {\n\n    componentDidMount(){\n        auth.logout();\n        window.location = '/login';\n    }\n    \n    render() { \n        return null;\n    }\n}\n \nexport default Logout;","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport ProfilePic from '../common/ProfilePic';\nimport UserContext from '../../context/UserContext';\nimport Button from '../common/Button';\nimport { FaPencilAlt } from 'react-icons/fa';\n\n\nclass ProfileDetails extends Component {\n\n    static contextType = UserContext\n\n    render() { \n        const { user, onFollow, isFollowing } = this.props;\n        const { currentUser } = this.context;\n        const sameUser = currentUser._id === user._id;\n        return (\n            <div className=\"profile-details\">\n                <div className=\"content-details\">\n                    <ProfilePic src={ user.profilePic } />\n                    <span className=\"username\">{ user.username + (sameUser ? ' (Me)' : '' )} </span>\n                </div>\n                {\n                    sameUser ?\n                    <Link to=\"/profile/edit\"> \n                        <FaPencilAlt />\n                    </Link> :\n                    <Button \n                    styles={['outline']}\n                    size=\"small\"\n                    onClick={() => onFollow(user._id)}>\n                        { isFollowing ? 'Unfollow' : 'Follow' }\n                    </Button>\n\n                    }\n            </div>\n        );\n    }\n}\n \nexport default ProfileDetails;","import React, { Component } from 'react'\n\nclass TabNav extends Component {\n\n    render() { \n        const { tabs, currentTab, onClick } = this.props;\n\n        return ( \n            <div className=\"tabnav\">\n                {\n                    tabs.map(tab => {\n                        return <p \n                        key={tab}\n                        className={\"tabnav__item clickable\" + (tab === currentTab ? \" tabnav__item--active\" : '')}\n                        onClick={() => onClick(tab)}>{tab}</p>\n                    })\n                }\n            </div>\n         );\n    }\n}\n \nexport default TabNav;","import React, { Component } from 'react';\nimport ProfilePic from '../common/ProfilePic';\n\nclass ProfileSimple extends Component {\n\n    render() { \n        const { user, onClick } = this.props;\n        return ( \n            <div \n            className=\"profile-simple clickable\"\n            onClick={() => onClick(user._id)}>\n                <ProfilePic src={user.profilePic} />\n                <span>{ user.username }</span>\n            </div>\n         );\n    }\n}\n \nexport default ProfileSimple;","import React from 'react';\nimport Button from '../common/Button';\nimport ProfileSimple from './ProfileSimple';\n\nconst ProfileList = ({\n    loadMore,\n    onLoadMore,\n    users,\n    onProfileClick\n}) => {\n    return (<div className=\"profile-list\">\n        {\n            users.map(user => {\n            return <ProfileSimple \n                    key={user._id} \n                    user={user} \n                    onClick={onProfileClick}/>\n            })\n        }\n        {\n            loadMore &&\n            <div className=\"load-more-container\">\n                <Button\n                color=\"secondary\"\n                size=\"small\"\n                onClick={onLoadMore}>\n                    Load More\n                </Button>\n            </div>\n        }\n    </div>\n    )\n};\n\nexport default ProfileList;","import React, { Component } from 'react';\nimport { toast } from 'react-toastify';\nimport Posts  from '../posts/Posts';\nimport ProfileDetails from './ProfileDetails';\nimport TabNav from '../common/TabNav';\nimport UserContext from '../../context/UserContext';\n\nimport { getPosts, deletePost } from '../../services/postService';\nimport { getUser, getFollowers, getFollowing, updateMe, checkFollowing } from '../../services/userService';\nimport { decompressPosts, decompressUser, decompressUsers } from '../../utils/media';\nimport './ProfilePage.css';\nimport ProfileList from './ProfileList';\nimport config from '../../config';\n\nconst loadLimit = config.loadLimit;\n\nclass ProfilePage extends Component {\n    static contextType = UserContext;\n\n    state = {\n        currentTab: 'Posts',\n        posts: null,\n        user: null,\n        following: null,\n        followers: null,\n    }   \n\n    tabs = ['Posts', 'Following', 'Followers']\n\n    componentDidMount(){\n        this.unlisten = this.props.history.listen((location, action) => {\n            let path = location.pathname;\n            if (path.startsWith('/profile')){\n                path = location.pathname.endsWith('/') ?\n                location.pathname.substring(1, location.pathname.length) : \n                location.pathname.substring(1);\n                const parts = path.split('/');\n                if (parts.length === 2 && parts[1] !== 'edit')\n                    this.setUser(parts[1]);\n            }\n        });\n        this.setUser(this.props.match.params.id);\n    }\n    \n    componentWillUnmount(){\n        this.unlisten();\n    }\n\n    handleTabChange = tab => {\n        const {  posts, following, followers } = this.state;\n        const { id } = this.props.match.params;\n        \n        if (tab === 'Posts' && !posts) this.setPosts(id);\n        else if (tab === 'Following' && !following) this.setFollowing(id);\n        else if (tab === 'Followers' && !followers) this.setFollowers(id);\n        this.setState({ currentTab: tab });\n\n    }\n\n    handleDeletePost = async id => {\n        \n        try {\n            const { user, posts: oldPosts } = this.state;\n\n            await deletePost(id);\n\n            const { data: replacement } = await getPosts({ \n                filter: 'userId', \n                filterData: user._id, \n                maxDate: oldPosts[oldPosts.length - 1].date,\n                limit: 1\n            });\n\n            await decompressPosts(replacement);\n\n            const posts = oldPosts\n            .filter(post => post._id !== id)\n            .concat(replacement);\n\n            this.setState({ posts, loadMorePosts: replacement.length !== 0  });\n        } catch (ex) {\n            if (ex.response){\n                const status = ex.response.status;\n                if (status === 401)\n                    toast.warn(\"You can only delete your own posts/comments\");\n                else if (status === 404)\n                    toast.error(\"Post not found. Refresh to get latest content\");\n            }\n        }\n    }\n\n    setFollowing = async (id) => {\n        try {\n            const { data: following } = await getFollowing(id);\n            await decompressUsers(following);\n            this.setState({ \n                following, \n                loadMoreFollowing: following.length >= loadLimit \n            });\n        } catch (ex) {\n            console.log('Error: ', ex);\n        }\n    }\n\n    setFollowers = async (id) => {\n        try {\n            const { data: followers } = await getFollowers(id);\n            await decompressUsers(followers);\n            this.setState({ \n                followers,\n                loadMoreFollowers: followers.length >= loadLimit \n             });\n        } catch (ex) {\n            console.log('Error: ', ex);\n        }\n    }\n\n    setUser = async (id) => {\n        try {\n            const { data: user } = await getUser(id);\n           \n            await decompressUser(user);\n            \n            const { data: posts } = await getPosts({\n                filter: 'userId',\n                filterData: id,\n            });    \n\n            const { data: isFollowing } = await checkFollowing(id);\n\n            await decompressPosts(posts);\n\n            this.setState({ \n                user, \n                posts,\n                following: null,\n                followers: null,\n                currentTab: 'Posts',\n                loadMorePosts: posts.length >= loadLimit,\n                isFollowing\n            });\n        } catch (ex) {\n            console.log('Error: ', ex);\n        }\n    }\n\n    handleLoadMorePosts = async () => {\n        const { posts, user } = this.state;\n        const { data: morePosts } = await getPosts({\n            filter: 'userId',\n            filterData: user._id, \n            maxDate: posts[posts.length - 1].date\n        });\n        await decompressPosts(morePosts);\n        const combinedPosts = posts.concat(morePosts);\n\n        this.setState({ posts: combinedPosts, loadMorePosts: morePosts.length >= loadLimit});\n\n    }   \n\n    handleLoadMoreFollowing = async () => {\n        const { following, user } = this.state;\n        const { data: moreFollowing } = await getFollowing(\n            user._id, \n            following.length && following[following.length - 1].date\n            );\n\n        await decompressUsers(moreFollowing);\n\n        const combinedFollowing = following.concat(moreFollowing);\n\n        this.setState({\n            following: combinedFollowing,\n            loadMoreFollowing: moreFollowing.length >= loadLimit\n        });\n    }\n\n    handleLoadMoreFollowers = async () => {\n        const { followers, user } = this.state;\n        const { data: moreFollowers } = await getFollowers(\n            user._id, \n            followers.length &&\n            followers[followers.length - 1].date\n            );\n\n        await decompressUsers(moreFollowers);\n\n        const combinedFollowers = followers.concat(moreFollowers);\n\n        this.setState({\n            followers: combinedFollowers,\n            loadMoreFollowers: moreFollowers.length >= loadLimit\n        });\n    }\n\n    handleFollow = async (id) => {\n        const { isFollowing, following: oldFollowing, followers: oldFollowers, user } = this.state;\n        const { currentUser } = this.context; \n        await updateMe({ following: { id, follow: !isFollowing } });\n\n        let followers, following, loadMoreFollowers;\n\n        if (isFollowing){\n            followers = oldFollowers && oldFollowers.filter(user => user._id !== currentUser._id);\n            if (followers){\n                const { data: replacement } = await getFollowers(\n                    user._id,\n                    oldFollowers[oldFollowers.length - 1].date,\n                    1\n                ); \n                followers = followers.concat(replacement);\n                loadMoreFollowers = replacement.length !== 0;\n            }\n        }\n        else {\n            const { data: newFollowee } = await getUser(currentUser._id);\n            await decompressUser(newFollowee);\n            \n            followers = oldFollowers && [newFollowee, ...oldFollowers]\n\n            if (currentUser._id === user._id)\n                following = oldFollowing && [newFollowee, ...oldFollowing];\n        }\n\n        this.setState({ \n            isFollowing: !isFollowing,\n            following,\n            followers,\n            loadMoreFollowers\n        });\n    }\n\n    handleProfileClick = (id) => {\n        this.props.history.push(`/profile/${id}`);\n    }\n\n    handlePostClick = id => {\n        this.props.history.push(`/posts/${id}`);\n    }\n\n    render() { \n        // console.log('profilePage render()');\n        const { \n            user, \n            currentTab, \n            posts, \n            following, \n            followers,\n            loadMorePosts,\n            loadMoreFollowing,\n            loadMoreFollowers,\n            isFollowing } = this.state;\n\n        const { currentUser } = this.context;\n\n        if (!user) return null;\n\n        return ( \n            <div className=\"page profile-page\">\n                <div className=\"profile-card\">\n                    <header className=\"card__header profile-card__header\">\n                        <ProfileDetails \n                        user={user} \n                        onFollow={this.handleFollow}\n                        isFollowing={isFollowing}/>\n    \n                        <TabNav \n                        tabs={this.tabs}\n                        currentTab={currentTab}\n                        onClick={this.handleTabChange}/>\n                    </header>\n                <div className=\"card__body profile-card__body\">\n                {\n                    (currentTab === 'Posts') && \n                    (\n                        !posts ? <p>Loading posts...</p> :\n                        (\n                            <div \n                            className=\"posts-container animate__animated animate__fadeIn\">\n                                <Posts \n                                posts={posts}\n                                onProfileClick={this.handleProfileClick}\n                                onPostClick={this.handlePostClick}\n                                onDelete={this.handleDeletePost}\n                                onLoadMore={this.handleLoadMorePosts}\n                                loadMore={loadMorePosts}\n                                optionMenu={ (currentUser._id === user._id) && ['Delete'] }\n                                hideOptions={ currentUser._id !== user._id }\n                                />\n                            </div>\n                        )\n                    )\n                    \n                }\n                {\n                    (currentTab === 'Following') && \n                    (\n                        !following ? <p>Loading followings...</p> :\n                        (\n                            <div className=\"following-container animate__animated animate__fadeIn\">\n                                <ProfileList\n                                users={following}\n                                onProfileClick={this.handleProfileClick}\n                                loadMore={loadMoreFollowing}\n                                onLoadMore={this.handleLoadMoreFollowing}\n                                />\n                            </div>\n                        )\n                    )\n                }\n                {\n                    (currentTab === 'Followers') && \n                    (\n                        !followers ? <p>Loading followers..</p> :\n                        (\n                            <div className=\"followers-container animate__animated animate__fadeIn\">\n                                <ProfileList\n                                users={followers}\n                                onProfileClick={this.handleProfileClick}\n                                loadMore={loadMoreFollowers}\n                                onLoadMore={this.handleLoadMoreFollowers}/>\n                            </div>\n                        )\n                    )\n                }\n                </div>\n                </div>\n            </div>\n         );\n    }\n}\n \nexport default ProfilePage;","import React from 'react';\nimport _ from 'lodash';\nimport Form from '../common/Form';\nimport UserContext from '../../context/UserContext';\nimport Joi from 'joi-browser';\nimport { updateMe } from '../../services/userService';\nimport { makeAlert } from '../../utils/alert';\n\nclass EditDescription extends Form {\n    static contextType = UserContext;\n\n    state = {\n        errors: {},\n        alert: null\n    }\n    \n    data = {}\n\n    schema = {\n        description: Joi.string().allow('')\n    }\n\n    componentDidMount(){\n        this.data.description = this.context.currentUser.description;\n    }\n\n    doSubmit = async () => {\n        try {\n            const { description } = this.data;\n            const { data: newDescription } = await updateMe({ description });\n            const alert = makeAlert('accent', 'Description updated');\n            this.setState({ alert });\n            this.context.updateUser('description', newDescription);\n        } catch (ex) {\n            if (ex.response && ex.response.status === 400){\n                const alert = makeAlert('primary', ex.response.data);\n                this.setState({ alert })\n            }\n        }\n    }\n\n    render() { \n        const { description } = this.context.currentUser;\n        const { alert, errors } = this.state;\n\n        return ( \n            <div className=\"page page-form\">\n                <form \n                onSubmit={this.handleSubmit} \n                className=\"form\"\n                >\n                    <h2>Edit Description</h2>\n                    { _.isEmpty(errors) && alert }\n                    {this.renderInput(\n                        'description', \n                        '', \n                        { inputType: 'textarea',  defaultValue: description })}\n                    {this.renderButton('Save')}\n                </form>\n            </div>\n         );\n    }\n}\n \nexport default EditDescription;","import React from 'react';\nimport Form from '../common/Form';\nimport _ from 'lodash';\nimport UserContext from '../../context/UserContext';\nimport { makeAlert } from '../../utils/alert';\nimport { updateMe } from '../../services/userService';\nimport Joi  from 'joi-browser';\n\nclass EditUsername extends Form {\n    static contextType = UserContext;\n\n    state = {\n        errors: {},\n        alert: null\n    }\n\n    schema = {\n        username: Joi.string()\n    }\n\n    data = {}\n\n    componentDidMount() {\n        this.data.username = this.context.currentUser.username;\n    }\n\n    doSubmit = async () => {\n        try {\n            const { username } = this.data;\n            const { data: newUsername } = await updateMe({ username });\n            // console.log('newUsername: ', newUsername);\n            const alert = makeAlert('accent', 'Username updated');\n            this.setState({ alert })\n            this.context.updateUser('username', newUsername);\n        } catch (ex) {\n            if (ex.response && ex.response.status === 400){\n                const errors = { username: ex.response.data };\n                this.setState({ errors })\n            }\n        }\n    }\n\n    render() { \n        const { username } = this.context.currentUser;\n        const { alert, errors } = this.state;\n\n        return ( \n            <div className=\"page page-form\">\n                <form onSubmit={this.handleSubmit} className=\"form\">\n                    <h2>Edit Username</h2>\n                    { _.isEmpty(errors) && alert }\n                    {this.renderInput('username', '', { defaultValue: username })}\n                    {this.renderButton('Save')}\n                </form>\n            </div>\n         );\n    }\n}\n \nexport default EditUsername;","import React from 'react';\nimport _ from 'lodash';\nimport Form from '../common/Form';\nimport UserContext from '../../context/UserContext';\nimport Joi from 'joi-browser';\nimport { updateMe } from '../../services/userService';\nimport { makeAlert } from '../../utils/alert';\n\nclass EditEmail extends Form {\n    static contextType = UserContext;\n\n    state = {\n        errors: {},\n        alert: null\n    }\n\n    data = {}\n\n    schema = {\n        email: Joi.string().email()\n    }\n\n    componentDidMount() {\n        this.data.email = this.context.currentUser.email;\n    }\n\n    doSubmit = async () => {\n        try {\n            const { email } = this.data;\n            const { data: newEmail } = await updateMe({ email });\n            const alert = makeAlert('accent', 'Email updated');\n            this.setState({ alert });\n            this.context.updateUser('email', newEmail);\n        } catch (ex) {\n            if (ex.response && ex.response.status === 400){\n                const errors = { email: ex.response.data };\n                this.setState({ errors })\n            }\n        }\n    }\n\n    render() { \n        const { email } = this.context.currentUser;\n        const { errors, alert } = this.state;\n\n        return ( \n            <div className=\"page page-form\">\n                <form onSubmit={this.handleSubmit} className=\"form\">\n                    <h2>Edit Email</h2>\n                    { _.isEmpty(errors) && alert }\n                    {this.renderInput('email', '', { defaultValue: email })}\n                    {this.renderButton('Save')}\n                </form>\n            </div>\n         );\n    }\n}\n \nexport default EditEmail;","import React from 'react';\nimport Form from '../common/Form';\nimport _ from 'lodash';\nimport UserContext from '../../context/UserContext';\nimport { makeAlert } from '../../utils/alert';\nimport { updateMe } from '../../services/userService';\nimport Joi  from 'joi-browser';\n\nclass EditPassword extends Form {\n    static contextType = UserContext;\n\n    state = {\n        errors: {},\n        alert: null\n    }\n\n    schema = {\n        password: Joi.string().min(8),\n        confirmPassword: Joi.string()\n    }\n\n    data = { password: '', confirmPassword: '' }\n\n    doSubmit = async () => {\n        const { password, confirmPassword } = this.data;\n        if (confirmPassword !== password){\n            const errors = { confirmPassword: \"Passwords don't match\"};\n            this.setState({ errors });\n            return;\n        }\n        try {\n            \n            await updateMe({ password });\n            // console.log('newUsername: ', newUsername);\n            const alert = makeAlert('accent', 'Password updated');\n            this.setState({ alert })\n        } catch (ex) {\n            if (ex.response && ex.response.status === 400){\n                const errors = { password: ex.response.data };\n                this.setState({ errors })\n            }\n        }\n    }\n\n    render() { \n        const { alert, errors } = this.state;\n\n        return ( \n            <div className=\"page page-form\">\n                <form onSubmit={this.handleSubmit} className=\"form\">\n                <   h2>Edit Password</h2>\n                    { _.isEmpty(errors) && alert }\n                    {this.renderInput('password', 'New Password', { type: 'password' })}\n                    {this.renderInput('confirmPassword', 'Confirm Password', { type: 'password' })}\n                    {this.renderButton('Save')}\n                </form>\n            </div>\n         );\n    }\n}\n \nexport default EditPassword;","import React from 'react';\nimport withFileChooser from '../hoc/withFileChooser';\n\nconst EditRow = (props) => {\n    const { label, text, icon, ...rest } = props;\n    return ( \n        <div {...rest}>\n            <span className=\"edit-row__label\">{ label }</span>\n            <span className=\"edit-row__text\">{ text }</span>\n            <span className=\"icon\">{ icon }</span>\n        </div>\n     );\n}\n\nconst EditRowWithFile = withFileChooser(EditRow);\n\nexport {\n    EditRow,\n    EditRowWithFile\n}\n\n","import React, { Component } from 'react';\nimport UserContext from '../../context/UserContext';\nimport ProfilePic from '../common/ProfilePic';\nimport { EditRow, EditRowWithFile } from './EditRow';\nimport { compress, readMedia } from '../../utils/media';\nimport { updateMe } from '../../services/userService';\nimport { BsChevronRight } from 'react-icons/bs';\nimport './ProfileEdit.css';\n\n\nclass ProfileEdit extends Component {\n    static contextType = UserContext;\n\n    goToUpdate = page => {\n        this.props.history.push(`/profile/edit/${page}`);\n    }\n\n    handleProfilePicUpload = async file => {\n        try {\n            const profilePic = await readMedia(file);\n            this.context.updateUser('profilePic', profilePic);\n            const compressed = await compress(profilePic);\n            await updateMe({ profilePic: compressed });\n        } catch (ex) {\n            if (ex.response)\n                console.log('Error: ', ex.response);\n            else\n                console.log('Error: ', ex);\n        }\n        \n\n    }\n\n    render() { \n        // console.log('profileEdit render()');\n        const { email, username, description, profilePic } = this.context.currentUser;\n        const arrow = <BsChevronRight />\n        return ( \n            <div className=\"page profile-edit-page\">\n                <div className=\"profile-edit__header\">\n                    My Profile\n                </div>\n                <EditRowWithFile\n                label=\"Photo\"\n                text=\"Shown on your posts and comments\"\n                icon={<ProfilePic src={profilePic} onClick={() => {}}/>}\n                className=\"edit-row profile-edit__photo clickable\"\n                extensions={['jpg', 'jpeg', 'gif', 'png']}\n                maxFileSize={2}\n                onFileChosen={this.handleProfilePicUpload}\n                />\n                \n                <EditRow \n                label=\"Username\"\n                text={ username }\n                icon={arrow}\n                className=\"edit-row profile-edit__username clickable\"\n                onClick={() => this.goToUpdate('username')}\n                />\n                <EditRow \n                label=\"Email\"\n                text={ email }\n                icon={arrow}\n                className=\"edit-row profile-edit__email clickable\"\n                onClick={() => this.goToUpdate('email')}\n                />\n                <EditRow \n                label=\"Description\"\n                text={ description }\n                icon={arrow}\n                className=\"edit-row profile-edit__description clickable\"\n                onClick={() => this.goToUpdate('description')}\n                />\n                <EditRow \n                label=\"Password\"\n                text=\"Click to change\"\n                icon={arrow}\n                className=\"edit-row profile-edit__password clickable\"\n                onClick={() => this.goToUpdate('password')}\n                />\n                \n            </div>\n         );\n    }\n}\n \nexport default ProfileEdit;","import { PureComponent } from \"react\";\nimport { withRouter } from \"react-router-dom\";\n\nclass ScrollToTop extends PureComponent {\n  componentDidMount = () => window.scrollTo(0, 0);\n\n  componentDidUpdate = prevProps => {\n    if (this.props.location !== prevProps.location) window.scrollTo(0, 0);\n  };\n\n  render = () => this.props.children;\n}\n\nexport default withRouter(ScrollToTop);","import React from 'react';\nimport { Redirect } from 'react-router-dom';\n\nimport _ from 'lodash';\nimport Joi from 'joi-browser';\nimport Form from './common/Form';\nimport { register } from '../services/userService';\nimport auth from '../services/authService';\nimport UserContext from '../context/UserContext';\nimport { makeAlert } from '../utils/alert';\nimport sbkImage from '../images/sbk_image.svg'\n\nclass Register extends Form {\n    static contextType = UserContext;\n    \n    state = {\n        errors: {},\n        data: {},\n        alert: null\n    }\n\n    data = { username: '', email: '', password: '' }\n\n    schema = {\n        username: Joi.string().min(5).max(255).required().label('Username'),\n        email: Joi.string().min(8).max(255).email().required().label('Email'),\n        password: Joi.string().min(8).max(255).required().label('Password'),\n        // password_confirmation: Joi.string().required().valid(Joi.ref('password'))\n    }\n\n    doSubmit = async () => {\n        try {\n            // const data = {...this.data, profilePic: compress(profilePic)};\n            const response = await register(this.data);\n            auth.loginWithJwt(response.headers['x-auth-token']);\n            await this.context.onLogin(); // notify App that jwt is set\n            window.location = '/';\n        } catch (ex) {\n            if (ex.response && ex.response.status === 400){\n                const alert = makeAlert('primary', ex.response.data);\n                this.setState({ alert });\n            }\n        }\n    }\n\n    render() {\n        if (auth.hasCurrentUser()) return <Redirect to='/' />;\n\n        const { alert, errors } = this.state;\n        // console.log(errors);\n        return (\n            <div \n            className=\"page register-page page-form\">\n                <img src={sbkImage} alt=\"\"/>\n                <form onSubmit={this.handleSubmit} className=\"form\">\n                    <h2>Register</h2>\n                    { _.isEmpty(errors) && alert }\n                    {this.renderInput('username', 'Username', { autoFocus: true })}\n                    {this.renderInput('email', 'Email')}\n                    {this.renderInput('password', 'Password', { type: 'password' })}\n                    {//this.renderInput('confirmPassword', 'Confirm Password', 'password')\n                    }\n                    {this.renderButton('Register')}\n                </form>\n            </div>\n        )\n    }\n\n}\n\nexport default Register;","import React, { Component } from 'react';\nimport { Route, Switch, Redirect } from 'react-router-dom';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport UserContext from './context/UserContext';\nimport PostsPage from './components/posts/PostsPage';\nimport NotFound from './components/NotFound';\nimport PostPage from './components/posts/PostPage';\nimport Login from './components/Login';\nimport ProtectedRoute from './components/common/ProtectedRoute';\nimport NavBar from './components/Navbar';\nimport Logout from './components/Logout';\nimport ProfilePage from './components/profile/ProfilePage';\nimport EditDescription from './components/profile/EditDescription';\nimport EditUsername from './components/profile/EditUsername';\nimport EditEmail from './components/profile/EditEmail';\nimport EditPassword from './components/profile/EditPassword';\nimport ProfileEdit from './components/profile/ProfileEdit';\nimport ScrollToTop from './components/ScrollToTop';\n\nimport auth from './services/authService';\nimport { getMe } from './services/userService';\nimport { decompress } from './utils/media';\nimport Register from './components/Register';\n\nclass App extends Component {\n  state = {\n    currentUser: null,\n  };\n\n  componentDidMount() {\n    this.setUser();\n  }\n\n  setUser = async () => {\n    if (!auth.hasCurrentUser()) return;\n\n    try {\n      this.handleLogin();\n    } catch (ex) {\n      toast.error('Something went wrong');\n      auth.logout();\n    }\n  };\n\n  handleLogin = async () => {\n    const currentUser = await getMe();\n\n    if (currentUser.profilePic)\n      currentUser.profilePic = await decompress(currentUser.profilePic);\n    this.setState({ currentUser });\n  };\n\n  updateUser = (property, value) => {\n    const currentUser = { ...this.state.currentUser };\n    currentUser[property] = value;\n    this.setState({ currentUser });\n  };\n\n  render() {\n    if (auth.hasCurrentUser() && !this.state.currentUser) return null;\n\n    return (\n      <UserContext.Provider\n        value={{\n          currentUser: this.state.currentUser,\n          onLogin: this.handleLogin,\n          updateUser: this.updateUser,\n        }}\n      >\n        <React.Fragment>\n          <ToastContainer />\n          <NavBar />\n          <main>\n            <ScrollToTop>\n              <Switch>\n                <Route path=\"/register\" component={Register} exact />\n                <Route path=\"/login\" component={Login} exact />\n                <Route path=\"/logout\" component={Logout} exact />\n                <Route path=\"/posts/:id\" component={PostPage} exact />\n                <Route path=\"/posts\" component={PostsPage} exact />\n                <ProtectedRoute\n                  path=\"/profile/edit\"\n                  component={ProfileEdit}\n                  exact\n                />\n                <ProtectedRoute\n                  path=\"/profile/:id\"\n                  component={ProfilePage}\n                  exact\n                />\n                <ProtectedRoute\n                  path=\"/profile/edit/username\"\n                  component={EditUsername}\n                  exact\n                />\n                <ProtectedRoute\n                  path=\"/profile/edit/email\"\n                  component={EditEmail}\n                  exact\n                />\n                <ProtectedRoute\n                  path=\"/profile/edit/description\"\n                  component={EditDescription}\n                  exact\n                />\n                <ProtectedRoute\n                  path=\"/profile/edit/password\"\n                  component={EditPassword}\n                  exact\n                />\n                <Route path=\"/not-found\" component={NotFound} />\n                <Redirect\n                  from=\"/\"\n                  to={auth.hasCurrentUser() ? '/posts' : '/login'}\n                  exact\n                />\n                <Redirect to=\"/not-found\" />\n              </Switch>\n            </ScrollToTop>\n          </main>\n          <footer></footer>\n        </React.Fragment>\n      </UserContext.Provider>\n    );\n  }\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'normalize.css';\nimport './index.css';\nimport 'animate.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}