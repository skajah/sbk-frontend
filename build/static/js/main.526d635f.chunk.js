(this["webpackJsonpsbk-frontend"]=this["webpackJsonpsbk-frontend"]||[]).push([[0],{111:function(e,t){},113:function(e,t){},120:function(e,t,n){},121:function(e,t,n){},122:function(e,t,n){},128:function(e,t,n){},129:function(e,t,n){},130:function(e,t,n){},131:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),s=n(38),c=n.n(s),o=(n(78),n(79),n(80),n(9)),i=n(3),l=n.n(i),u=n(4),d=n(5),p=n(8),h=n(7),f=n(6),j=n(12),m=n(11),b=n(65),x=(n(84),r.a.createContext());x.displayName="UserContext";var v=x,O=n(29),g=n(23),w=n(16),k=n(1);var y=function(e){return function(t){Object(h.a)(a,t);var n=Object(f.a)(a);function a(){return Object(d.a)(this,a),n.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var t=this.props,n=t.alert,a=Object(w.a)(t,["alert"]);return Object(k.jsxs)(r.a.Fragment,{children:[Object(k.jsx)(e,Object(o.a)({},a)),n&&Object(k.jsx)("div",{className:"alert alert--"+n.type,children:n.message})]})}}]),a}(r.a.Component)},C=y(function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).handleTextChange=function(t){var n=t.currentTarget.value;e.props.onTextChange(n)},e.renderInput=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.name,a=t.className,r=t.clear,s=t.placeholder;return Object(k.jsx)("input",{name:n,type:"text",className:a,value:r?"":void 0,placeholder:s,onChange:e.handleTextChange})},e.renderTextArea=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.name,a=t.className,r=t.clear,s=t.placeholder;return Object(k.jsx)("textarea",{name:n,type:"text",className:a,value:r?"":void 0,placeholder:s,onChange:e.handleTextChange})},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.type,n=Object(w.a)(e,["type"]);return"textarea"===t?this.renderTextArea(n):this.renderInput(n)}}]),n}(a.Component)),_=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).text="",e.handleSearchTextChange=function(t){e.text=t},e.handleKeywordSearch=function(){e.props.onKeywordSearch(e.text)},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=this.props.placeholder;return Object(k.jsxs)("div",{className:"input-group",children:[Object(k.jsx)(C,{name:"searchKeyword",placeholder:t,className:"text-box",onTextChange:this.handleSearchTextChange}),Object(k.jsx)("span",{className:"icon icon--medium clickable",onClick:function(){return e.handleKeywordSearch()},children:Object(k.jsx)(g.f,{})})]})}}]),n}(a.Component),S=y(function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).dateRange={start:null,end:null},e.handleStartDate=function(t){var n=t.target.value.replaceAll("-","/");e.dateRange.start=new Date(n),e.handleDateChange()},e.handleEndDate=function(t){var n=t.target.value.replaceAll("-","/");e.dateRange.end=new Date(n),e.handleDateChange()},e.handleDateChange=function(){var t=e.dateRange,n=t.start,a=t.end;n&&a&&"Invalid Date"!==n.toString()&&"Invalid Date"!==a.toString()&&e.props.onDateRange(n,a)},e}return Object(p.a)(n,[{key:"render",value:function(){return Object(k.jsxs)("div",{className:"search-date-range",children:[Object(k.jsx)("span",{className:"label",children:"From"}),Object(k.jsx)("input",{type:"date",name:"start-date",className:"search-date-range__input",onChange:this.handleStartDate}),Object(k.jsx)("span",{className:"label",children:"To"}),Object(k.jsx)("input",{type:"date",name:"start-end",className:"search-date-range__input",onChange:this.handleEndDate})]})}}]),n}(a.Component)),N=function(e){var t=e.options,n=e.onSelect;return Object(k.jsxs)("select",{className:"dropdown-list",children:[Object(k.jsx)("option",{value:""}),t.map((function(e){return Object(k.jsx)("option",{className:"dropdown-list__option",value:e,onClick:function(){return n(e)},children:e},e)}))]})},P=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.selectedItem,a=e.onClick;return Object(k.jsx)("ul",{className:"list-group",children:t.map((function(e){return Object(k.jsx)("li",{className:"list-group__item clickable"+(e===n?" list-group__item--active":""),onClick:function(){return a(e)},children:e},e)}))})}}]),n}(a.Component),D=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={dateRangeError:!1},e.handleDateRange=function(t,n){t>n?e.setState({dateRangeError:!0}):(e.props.onDateRange(t,n),e.setState({dateRangeError:!1}))},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.searchByUsername,n=e.dates,a=e.selectedDate,s=e.onDateSelected,c=e.onPostType,o=this.state.dateRangeError,i=this.context.currentUser;return Object(k.jsxs)("div",{className:"post-search",children:[Object(k.jsx)("p",{style:{fontSize:"2rem",margin:"0 0 1rem"},children:"Filter posts"}),Object(k.jsx)(_,{placeholder:" Enter a username",onKeywordSearch:t}),i&&Object(k.jsxs)(r.a.Fragment,{children:[Object(k.jsx)("p",{children:"Pick a Type"}),Object(k.jsx)(N,{options:["All","Liked Posts","Following"],onSelect:c})]}),Object(k.jsx)("p",{children:"Pick a Date"}),Object(k.jsx)(P,{items:n,selectedItem:a,onClick:s}),Object(k.jsx)(S,{onDateRange:this.handleDateRange,alert:o&&{type:"primary",message:"End date can't be before start date"}})]})}}]),n}(a.Component);D.contextType=v;var U=D,F=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"renderImage",value:function(e,t){return Object(k.jsx)("img",{src:e,alt:t,className:"media"})}},{key:"renderVideo",value:function(e,t){return Object(k.jsx)("video",{src:e,controls:!0,alt:t,className:"media"})}},{key:"renderAudio",value:function(e,t){return Object(k.jsx)("audio",{src:e,controls:!0,alt:t,className:"media"})}},{key:"renderMedia",value:function(e,t,n){var a=null;switch(e){case"image":case"gif":a=this.renderImage(t,n);break;case"video":a=this.renderVideo(t,n);break;case"audio":a=this.renderAudio(t,n)}return a}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.src,a=e.alt;return this.renderMedia(t,n,a)}}]),n}(a.Component),M=n(68);var L=function(e){return function(t){Object(h.a)(a,t);var n=Object(f.a)(a);function a(){return Object(d.a)(this,a),n.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var t=this.props,n=t.extensions,a=t.maxFileSize,r=t.onFileChosen,s=Object(w.a)(t,["extensions","maxFileSize","onFileChosen"]);return Object(k.jsx)("div",{className:"file-chooser",children:Object(k.jsx)(M.FilePicker,{extensions:n,maxSize:a,onChange:function(e){return r(e)},onError:function(e){return alert(e)},children:Object(k.jsx)(e,Object(o.a)({},s))})})}}]),a}(r.a.Component)};var T=L((function(e){return Object(k.jsx)("span",{className:"file-icon clickable",onClick:e.onClick,children:e.children})})),E=(n(86),["outline","rounded","block","corner"]),A=["small","medium","large"],I=["primary","secondary","accent"];var R=function(e){return e?e.filter((function(e){return E.includes(e)})).map((function(e){return"btn--"+e})).join(" "):""},z=function(e){return A.includes(e)?"btn--"+e:""},B=function(e){return"btn--".concat(I.includes(e)?e:"")},W=function(e){var t=e.children,n=e.styles,a=e.color,r=e.size,s=e.onClick,c=Object(w.a)(e,["children","styles","color","size","onClick"]);return Object(k.jsx)("button",Object(o.a)(Object(o.a)({className:"btn ".concat(R(n)," ").concat(z(r)," ").concat(B(a)),onClick:s},c),{},{children:t}))},J=n(42),K=n(69),q=(n(87),function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={media:null},e.text="",e.handleTextChange=function(t){e.text=t,e.state.clear&&e.setState({clear:!1})},e.handleCreate=function(){e.props.onCreate(e.text,e.state.media),e.text="",e.setState({media:null,clear:!0})},e.handleMediaUpload=function(t,n){var a={type:n,src:t};e.setState({media:a})},e.handleClearMedia=function(){e.setState({media:null})},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.clear,a=t.media;return Object(k.jsxs)("div",{className:"card create-post",children:[Object(k.jsx)("header",{className:"card__header create-post__header",children:a&&Object(k.jsx)(W,{size:"small",color:"secondary",onClick:this.handleClearMedia,children:"Clear Media"})}),Object(k.jsxs)("div",{className:"card__body create-post__body",children:[Object(k.jsx)(C,{name:"postText",placeholder:" What's on your mind?",clear:n,onTextChange:this.handleTextChange,className:"text-box create-post-text-box",type:"textarea"}),a&&Object(k.jsx)(F,{type:a.type,src:URL.createObjectURL(a.src),alt:"Post Media: "+a.type})]}),Object(k.jsxs)("div",{className:"create-post__footer",children:[Object(k.jsx)(T,{extensions:["jpg","jpeg","png","gif"],onFileChosen:function(t){return e.handleMediaUpload(t,"image")},maxFileSize:8,children:Object(k.jsx)("span",{className:"icon icon--medium",children:Object(k.jsx)(J.a,{})})}),Object(k.jsx)(T,{extensions:["mp4","mov","mpg"],onFileChosen:function(t){return e.handleMediaUpload(t,"video")},maxFileSize:8,children:Object(k.jsx)("span",{className:"icon icon--medium",children:Object(k.jsx)(J.b,{})})}),Object(k.jsx)(T,{extensions:["mp3","wav","ogg"],onFileChosen:function(t){return e.handleMediaUpload(t,"audio")},maxFileSize:8,children:Object(k.jsx)("span",{className:"icon icon--medium",children:Object(k.jsx)(K.a,{})})}),Object(k.jsx)(W,{color:"accent",size:"small",onClick:this.handleCreate,children:"Post"})]})]})}}]),n}(a.Component));q.contextType=v;var V=y(q),Y=n(28),H=n.n(Y);H.a.interceptors.response.use(null,(function(e){var t=e.response;return t&&t.status>=400&&t.status<500||m.b.error(Object(k.jsxs)("div",{children:["An unexpected error occured ",Object(k.jsx)("br",{})," ",e.message]})),Promise.reject(e)}));var G={get:H.a.get,post:H.a.post,put:H.a.put,delete:H.a.delete,patch:H.a.patch,setJwt:function(e){H.a.defaults.headers.common["x-auth-token"]=e}},Q=Object(o.a)(Object(o.a)({},{apiUrl:"http://localhost:4000/api",loadLimit:5}),{},{apiUrl:"https://sbk-backend.herokuapp.com/api"}),X=Q.loadLimit,Z=Q.apiUrl+"/posts";function $(e){var t=e.filter,n=e.filterData,a=e.maxDate,r=e.limit,s=void 0===r?X:r;return G.get("".concat(Z,"?filter=").concat(t||"","&filterData=").concat(n,"&maxDate=").concat(a||"","&limit=").concat(s,"&now=").concat(new Date))}function ee(e){return G.post(Z,e)}function te(e){return G.delete("".concat(Z,"/").concat(e))}function ne(e){return G.patch("".concat(Z,"/").concat(e),{liked:!0})}function ae(e){return G.patch("".concat(Z,"/").concat(e),{liked:!1})}function re(e){e.date=new Date(e.date)}var se=n(27),ce=n(105);function oe(e){return new Promise((function(t,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){t(a.result)},a.onerror=function(e){n(e)}}))}function ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"StorageBinaryString";return new Promise((function(n,a){ce.compressAsync(e,{outputEncoding:t},(function(e,t){t?a(t):n(e)}))}))}function le(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"StorageBinaryString";return new Promise((function(n,a){ce.decompressAsync(e,{inputEncoding:t},(function(e,t){t?a(t):n(e)}))}))}function ue(e){return de.apply(this,arguments)}function de(){return(de=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(re(t),!t.media){e.next=5;break}return e.next=4,le(t.media.data);case 4:t.media.data=e.sent;case 5:return e.next=7,me(t.user);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(e){return he.apply(this,arguments)}function he(){return(he=Object(u.a)(l.a.mark((function e(t){var n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(se.a)(t),e.prev=1,n.s();case 3:if((a=n.n()).done){e.next=9;break}return r=a.value,e.next=7,ue(r);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function fe(e){return je.apply(this,arguments)}function je(){return(je=Object(u.a)(l.a.mark((function e(t){var n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(se.a)(t),e.prev=1,n.s();case 3:if((a=n.n()).done){e.next=10;break}return re(r=a.value),e.next=8,me(r.user);case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})))).apply(this,arguments)}function me(e){return be.apply(this,arguments)}function be(){return(be=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.profilePic){e.next=4;break}return e.next=3,le(t.profilePic);case 3:t.profilePic=e.sent;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(e){return ve.apply(this,arguments)}function ve(){return(ve=Object(u.a)(l.a.mark((function e(t){var n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(se.a)(t),e.prev=1,n.s();case 3:if((a=n.n()).done){e.next=9;break}return r=a.value,e.next=7,me(r);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}n(64);var Oe=n(26),ge=(n(120),function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(k.jsxs)("div",{className:"card",children:[Object(k.jsx)("header",{className:"card__header",children:"Card Header"}),Object(k.jsx)("div",{className:"card__body",children:"Card Body"})]})}}]),n}(a.Component)),we=Q.loadLimit,ke=Q.apiUrl+"/comments";function ye(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:we;return G.get("".concat(ke,"?postId=").concat(e,"&maxDate=").concat(t||"","&limit=").concat(n))}function Ce(e){return G.post(ke,e)}function _e(e){return G.delete("".concat(ke,"/").concat(e))}function Se(e){return G.patch("".concat(ke,"/").concat(e),{liked:!0})}function Ne(e){return G.patch("".concat(ke,"/").concat(e),{liked:!1})}var Pe=Q.loadLimit,De=Q.apiUrl+"/users";function Ue(e){return G.post(De,e)}function Fe(){return Me.apply(this,arguments)}function Me(){return(Me=Object(u.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.get("".concat(De,"/me"));case 2:return t=e.sent,n=t.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(e){return G.patch("".concat(De,"/me"),e)}function Te(e){return G.get("".concat(De,"/").concat(e))}function Ee(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pe;return G.get("".concat(De,"/").concat(e,"/following?maxDate=").concat(t||"","&limit=").concat(n))}function Ae(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pe;return G.get("".concat(De,"/").concat(e,"/followers?maxDate=").concat(t||"","&limit=").concat(n))}function Ie(e,t){return G.get("".concat(De,"/me/checkLiked/").concat(e,"?type=").concat(t))}function Re(e){return G.get("".concat(De,"/me/checkFollowing/").concat(e))}var ze=n.p+"static/media/profileDefault.90dc751e.jpg";function Be(e){var t=e.src,n=e.onClick;return Object(k.jsx)("img",{src:t||ze,alt:"Profile Pic",className:"profile-pic clickable",onClick:function(){n&&n()},style:{width:"4rem",height:"4rem",borderRadius:"100%",marginRight:"10px"}})}function We(e){var t=e.profilePicSrc,n=e.onProfileClick,r=e.username,s=e.date,c=Object(a.useContext)(v).currentUser;return Object(k.jsxs)("div",{className:"content-details",children:[Object(k.jsx)(Be,{src:t,onClick:function(){c?n():Object(m.b)("Log in to view user profiles")}}),Object(k.jsxs)("span",{className:"inline-block user-date",children:[Object(k.jsx)("span",{className:"username",children:r})," ",Object(k.jsx)("br",{}),Object(k.jsx)("span",{className:"date",children:s.toDateString()})]})]})}var Je=n(70),Ke=(n(121),function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={showOptions:!1},e.dropdown=r.a.createRef(),e.handleOutsideClick=function(t){e.dropdown.current&&!e.dropdown.current.contains(t.target)&&e.setState({showOptions:!1})},e.handleDropdown=function(){var t=e.state.showOptions;t=!t,e.setState({showOptions:t})},e.handleOption=function(t){e.setState({showOptions:!1}),e.props.onOptionSelected(t)},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleOutsideClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleOutsideClick)}},{key:"render",value:function(){var e=this,t=this.props.options,n=this.state.showOptions;return Object(k.jsxs)("div",{className:"dropdown",ref:this.dropdown,children:[Object(k.jsx)("div",{className:"dropdown__content".concat(n?" show":""),children:t.map((function(t){return Object(k.jsx)(W,{styles:["block","corner"],onClick:function(){return e.handleOption(t)},children:t},t)}))}),Object(k.jsx)(Je.a,{onClick:this.handleDropdown,className:"clickable"})]})}}]),n}(a.Component)),qe=n(43),Ve=n.n(qe);function Ye(e){var t=e.children,n=e.count,a=e.onClick;return Object(k.jsxs)("span",{className:"icon-count",style:{display:"flex"},children:[Object(k.jsx)("span",{className:"icon icon--small ".concat(a?"clickable":""),onClick:a,children:t}),Object(k.jsxs)("span",{style:{marginLeft:"5px"},children:[n?He(n):null," "]})]})}function He(e){return e>=1e5?Ve()(e).format("0a").replace(".0",""):Ve()(e).format("0.0a").replace(".0","")}function Ge(e){var t=e.initialLike,n=e.onLike,r=Object(a.useState)(!1),s=Object(Oe.a)(r,2),c=s[0],o=s[1];Object(a.useEffect)((function(){o(t)}),[t]);var i=c?Object(k.jsx)(g.e,{}):Object(k.jsx)(g.d,{});return Object(k.jsx)("span",{className:"icon clickable",onClick:function(){o(!c),n(!c)},children:i})}var Qe=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={date:new Date,text:"",user:{}},e.handleLike=function(){var t=Object(u.a)(l.a.mark((function t(n){var a,r,s,c,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.context.currentUser){t.next=3;break}return Object(m.b)("Log in to save liked content"),t.abrupt("return");case 3:if(t.prev=3,a=e.state._id,!n){t.next=11;break}return t.next=8,Se(a);case 8:t.t0=t.sent,t.next=14;break;case 11:return t.next=13,Ne(a);case 13:t.t0=t.sent;case 14:r=t.t0,s=r.data,c=s.likes,e.setState({likes:c}),t.next=23;break;case 20:t.prev=20,t.t1=t.catch(3),t.t1.response&&(400===(o=t.t1.response.status)?console.log("Error liking comment: ".concat(t.t1.response.data)):404===o&&m.b.error("Comment not found. Refresh to get latest content"));case 23:case"end":return t.stop()}}),t,null,[[3,20]])})));return function(e){return t.apply(this,arguments)}}(),e.handleOptionSelected=function(t){var n=e.props,a=n.onProfileClick,r=n.onDelete,s=n.onFollow,c=e.state,o=c.user,i=c._id;"Profile"===t?a(o._id):"Follow"===t||"Unfollow"===t?s(o._id):"Delete"===t&&r(i)},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.populateState()}},{key:"populateState",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a,r,s,c,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.comment,n=t._id,a=t.user,r=t.date,s=t.text,c=t.likes,!this.context.currentUser){e.next=5;break}return e.next=4,Ie(n,"comment");case 4:o=e.sent.data;case 5:this.setState({_id:n,user:a,date:r,text:s,likes:c,initialLike:o});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.text,n=e.user,a=e.likes,r=e.date,s=e.initialLike,c=this.props,o=c.onProfileClick,i=c.following,l=c.optionMenu,u=c.hideOptions,d=i[n._id],p=this.context.currentUser,h=l||["Profile"];return l||u||p&&(p._id===n._id?h.push("Delete"):h.push(d?"Unfollow":"Follow")),Object(k.jsxs)("div",{className:"card comment",children:[Object(k.jsxs)("header",{className:"card__header post__header",children:[Object(k.jsx)(We,{profilePicSrc:n.profilePic,onProfileClick:function(){return o(n._id)},username:n.username,date:r}),!u&&Object(k.jsx)(Ke,{options:h,onOptionSelected:this.handleOptionSelected})]}),Object(k.jsxs)("div",{className:"card__body comment__body",children:[Object(k.jsx)("p",{children:t}),Object(k.jsx)("div",{className:"comment__details",children:Object(k.jsx)(Ye,{count:a,children:Object(k.jsx)(Ge,{onLike:this.handleLike,initialLike:s})})})]})]})}}]),n}(ge);Qe.contextType=v;var Xe=Qe,Ze=function(e){var t=e.comments,n=e.onDelete,a=e.onProfileClick,r=e.onFollow,s=e.loadMore,c=e.onLoadMore,o=e.following,i=e.optionMenu,l=e.hideOptions;return Object(k.jsxs)("div",{className:"comments",children:[t.map((function(e){return Object(k.jsx)(Xe,{comment:e,onDelete:n,onProfileClick:a,onFollow:r,following:o,hideOptions:l,optionMenu:i},e._id)})),s&&Object(k.jsx)("div",{className:"load-more-container",children:Object(k.jsx)(W,{color:"secondary",size:"small",onClick:c,children:"Load More"})})]})},$e=n(71),et=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).text="",e.state={},e.handleTextChange=function(t){e.text=t,e.state.clear&&e.setState({clear:!1})},e.handleCreate=function(){e.props.onCreate(e.text),e.text="",e.setState({clear:!0})},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.alert,t=this.state.clear;return Object(k.jsxs)("div",{className:"create-comment",children:[Object(k.jsx)(C,{name:"commentText",placeholder:" Comment on this post...",className:"text-box create-comment-text-box",onTextChange:this.handleTextChange,clear:t,type:"textarea",alert:e}),Object(k.jsx)(W,{color:"accent",size:"small",onClick:this.handleCreate,children:"Comment"})]})}}]),n}(a.Component),tt=Q.loadLimit,nt=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={user:{},date:new Date,comments:[]},e.handleDeleteComment=function(){var t=Object(u.a)(l.a.mark((function t(n){var a,r,s,c,o,i,u,d;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e.state,r=a._id,s=a.numberOfComments,c=a.comments,t.next=4,_e(n);case 4:return t.next=6,ye(r,c[c.length-1].date,1);case 6:return o=t.sent,i=o.data,t.next=10,fe(i);case 10:u=c.filter((function(e){return e._id!==n})).concat(i),e.setState({comments:u,numberOfComments:s-1,loadMore:0!==i.length}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),t.t0.response&&(401===(d=t.t0.response.status)?m.b.warning("Can only delete your own posts/comments"):404===d&&m.b.error("Comment not fond. Refresh to get latest content"));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}(),e.handleCreateComment=function(){var t=Object(u.a)(l.a.mark((function t(n){var a,r,s,c,o,i,u,d;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.context.currentUser){t.next=4;break}return Object(m.b)("Log in to comment"),t.abrupt("return");case 4:if(n.trim()){t.next=7;break}return e.setState({alert:{type:"secondary",message:"Comment can't be empty"}}),t.abrupt("return");case 7:if(!(n.length>3e3)){t.next=10;break}return e.setState({alert:{type:"secondary",message:"Text can be at most 3,000 characters"}}),t.abrupt("return");case 10:return t.prev=10,r=e.state,s=r._id,c=r.numberOfComments,o={postId:s,text:n},t.next=15,Ce(o);case 15:i=t.sent,re(u=i.data),u.user.profilePic=a.profilePic,(d=Object(O.a)(e.state.comments)).unshift(u),e.setState({comments:d,alert:null,numberOfComments:c+1}),t.next=27;break;case 24:t.prev=24,t.t0=t.catch(10),m.b.error("Some went wrong commenting");case 27:case"end":return t.stop()}}),t,null,[[10,24]])})));return function(e){return t.apply(this,arguments)}}(),e.handleLike=function(){var t=Object(u.a)(l.a.mark((function t(n){var a,r,s,c,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.context.currentUser){t.next=3;break}return Object(m.b)("Log in to save liked content"),t.abrupt("return");case 3:if(t.prev=3,a=e.state._id,!n){t.next=11;break}return t.next=8,ne(a);case 8:t.t0=t.sent,t.next=14;break;case 11:return t.next=13,ae(a);case 13:t.t0=t.sent;case 14:r=t.t0,s=r.data,c=s.likes,e.props.onLike&&e.props.onLike(a),e.setState({likes:c}),t.next=24;break;case 21:t.prev=21,t.t1=t.catch(3),t.t1.response&&(400===(o=t.t1.response.status)?console.log("Error liking post: ".concat(t.t1.response.data)):404===o&&m.b.error("Post not found. Refresh to get latest content"));case 24:case"end":return t.stop()}}),t,null,[[3,21]])})));return function(e){return t.apply(this,arguments)}}(),e.handleOptionSelected=function(t){var n=e.props,a=n.onProfileClick,r=n.onDelete,s=n.onFollow,c=e.state,o=c.user,i=c._id;"Profile"===t?a(o._id):"Follow"===t||"Unfollow"===t?s(o._id):"Delete"===t&&r(i)},e.handleLoadMore=Object(u.a)(l.a.mark((function t(){var n,a,r,s,c,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,a=n._id,r=n.comments,t.next=3,ye(a,r[r.length-1].date);case 3:return s=t.sent,c=s.data,t.next=7,fe(c);case 7:o=r.concat(c),e.setState({comments:o,loadMore:c.length>=tt});case 9:case"end":return t.stop()}}),t)}))),e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.populateState()}},{key:"populateState",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a,r,s,c,o,i,u,d,p;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.post,n=t._id,a=t.user,r=t.date,s=t.text,c=t.media,o=t.comments,i=t.numberOfComments,u=t.likes,d=(o||[]).length>=tt,!this.context.currentUser){e.next=7;break}return e.next=6,Ie(n,"post");case 6:p=e.sent.data;case 7:this.setState({_id:n,user:a,date:r||new Date,text:s,media:c,comments:o||[],numberOfComments:i,likes:u,loadMore:d,initialLike:p});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e._id,n=e.text,a=e.media,s=e.user,c=e.date,o=e.numberOfComments,i=e.comments,l=e.likes,u=e.initialLike,d=e.loadMore,p=e.alert,h=this.props,f=h.showComments,j=h.onPostClick,m=h.onProfileClick,b=h.following,x=h.onFollow,v=h.optionMenu,O=h.hideOptions,g=b[s._id],w=this.context.currentUser,y=v||["Profile"];return v||O||w&&(w._id===s._id?y.push("Delete"):y.push(g?"Unfollow":"Follow")),Object(k.jsxs)(r.a.Fragment,{children:[Object(k.jsxs)("div",{className:"card post",children:[Object(k.jsxs)("header",{className:"card__header post__header",children:[Object(k.jsx)(We,{profilePicSrc:s.profilePic,onProfileClick:function(){return m(s._id)},username:s.username,date:c}),!O&&Object(k.jsx)(Ke,{options:y,onOptionSelected:this.handleOptionSelected})]}),Object(k.jsxs)("div",{className:"card__body post__body",children:[n&&Object(k.jsx)("p",{children:n}),a&&Object(k.jsx)(F,{type:a.mediaType,src:a.data,alt:"Post media: "+a.mediaType}),Object(k.jsxs)("div",{className:"post__details",children:[Object(k.jsx)(Ye,{count:l,children:Object(k.jsx)(Ge,{initialLike:u,onLike:this.handleLike})}),Object(k.jsx)(Ye,{count:o,onClick:j&&function(){return j(t)},children:Object(k.jsx)($e.a,{})})]})]})]}),f&&Object(k.jsxs)("div",{className:"comments-container",children:[Object(k.jsx)(et,{onCreate:this.handleCreateComment,alert:p}),Object(k.jsx)(Ze,{comments:i,onDelete:this.handleDeleteComment,onProfileClick:m,onFollow:function(e){return x(e)},onLoadMore:this.handleLoadMore,loadMore:d,following:b,hideOptions:!w})]})]})}}]),n}(ge);nt.contextType=v;var at=nt;function rt(e){return st.apply(this,arguments)}function st(){return(st=Object(u.a)(l.a.mark((function e(t){var n,a,r,s,c,o,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={},a=Object(se.a)(t),e.prev=2,a.s();case 4:if((r=a.n()).done){e.next=15;break}if(s=r.value,(c=s.user._id)in n){e.next=13;break}return e.next=10,Re(c);case 10:o=e.sent,i=o.data,n[c]=i;case 13:e.next=4;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),a.e(e.t0);case 20:return e.prev=20,a.f(),e.finish(20);case 23:return e.abrupt("return",n);case 24:case"end":return e.stop()}}),e,null,[[2,17,20,23]])})))).apply(this,arguments)}var ct=function(e){var t=e.posts,n=e.onFollow,r=e.onLike,s=e.onPostClick,c=e.onProfileClick,i=e.onDelete,d=e.onLoadMore,p=e.loadMore,h=e.showComments,f=e.optionMenu,j=e.hideOptions,m=Object(a.useState)({}),b=Object(Oe.a)(m,2),x=b[0],O=b[1],g=Object(a.useContext)(v).currentUser;Object(a.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt(t);case 2:if(n=e.sent,!h){e.next=10;break}return e.t0=o.a,e.t1=Object(o.a)({},n),e.next=8,rt(t[0].comments);case 8:e.t2=e.sent,n=(0,e.t0)(e.t1,e.t2);case 10:O(n);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}g&&function(){e.apply(this,arguments)}()}),[t,h,g]);var w=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(o.a)({},x),a=x[t],e.next=4,Le({following:{id:t,follow:!a}});case 4:a?delete n[t]:n[t]=1,O(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsxs)("div",{className:"posts",children:[t.map((function(e){return Object(k.jsx)(at,{post:e,onPostClick:s,onProfileClick:c,onDelete:i,onFollow:function(e){w(e),n&&n(e)},onLike:r,following:x,showComments:h,optionMenu:f,hideOptions:j},e._id)})),p&&Object(k.jsx)("div",{className:"load-more-container",children:Object(k.jsx)(W,{color:"secondary",size:"small",onClick:d,children:"Load More"})})]})},ot=Q.loadLimit,it=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={posts:null,emptyPost:!1},e.relativeDates=["Today","Yesterday","Last 7 Days","Last 30 Days"],e.filterMap={username:"Username",likedPosts:"Liked Posts",following:"Following",daysAgo:"Date (Day)",dateRange:"Date Range"},e.resize=function(){var t=window.innerWidth<1e3;e.state.mobile!==t&&e.setState({mobile:t})},e.populatePosts=Object(u.a)(l.a.mark((function t(){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,$({});case 3:return n=t.sent,a=n.data,t.next=7,pe(a);case 7:e.setState({posts:a,loadMore:a.length>=ot}),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(0);case 12:case"end":return t.stop()}}),t,null,[[0,10]])}))),e.handleLoadMore=Object(u.a)(l.a.mark((function t(){var n,a,r,s,c,o,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,a=n.filter,r=n.filterData,s=n.posts,t.next=3,$({filter:a,filterData:r,maxDate:s[s.length-1].date});case 3:return c=t.sent,o=c.data,t.next=7,pe(o);case 7:i=s.concat(o),e.setState({posts:i,loadMore:o.length>=ot});case 9:case"end":return t.stop()}}),t)}))),e.handleLike=function(){var t=Object(u.a)(l.a.mark((function t(n){var a,r,s,c,o,i,u;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("likedPosts"===e.state.filter){t.next=2;break}return t.abrupt("return");case 2:return a=e.state,r=a.filter,s=a.filterData,c=a.posts,t.next=5,$({filter:r,filterData:s,maxDate:c[c.length-1].date,limit:1});case 5:return o=t.sent,i=o.data,t.next=9,pe(i);case 9:u=c.filter((function(e){return e._id!==n})).concat(i),e.setState({posts:u,loadMore:0!==i.length});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleFollow=function(){var t=Object(u.a)(l.a.mark((function t(n){var a,r,s,c,o,i,u,d,p;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("following"===e.state.filter){t.next=2;break}return t.abrupt("return");case 2:return a=e.state,r=a.filter,s=a.filterData,c=a.posts,o=c.length,i=c.filter((function(e){return e.user._id!==n})),t.next=7,$({filter:r,filterData:s,maxDate:c[c.length-1].date,limit:o-i.length});case 7:return u=t.sent,d=u.data,t.next=11,pe(d);case 11:p=i.concat(d),e.setState({posts:p,loadMore:0!==d.length});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleDelete=function(){var t=Object(u.a)(l.a.mark((function t(n){var a,r,s,c,o,i,u,d;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e.state,r=a.filter,s=a.filterData,c=a.posts,t.next=4,te(n);case 4:return t.next=6,$({filter:r,filterData:s,maxDate:c[c.length-1].date,limit:1});case 6:return o=t.sent,i=o.data,t.next=10,pe(i);case 10:u=c.filter((function(e){return e._id!==n})).concat(i),e.setState({posts:u,loadMore:0!==i.length}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),t.t0.response&&(401===(d=t.t0.response.status)?m.b.warn("You can only delete your own posts/comments"):404===d&&m.b.error("Post not found. Refresh to get latest content"));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}(),e.handleCreate=function(){var t=Object(u.a)(l.a.mark((function t(n,a){var r,s,c,o,i,u,d;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.context.currentUser){t.next=4;break}return Object(m.b)("Log in to post"),t.abrupt("return");case 4:if(n.trim()||a){t.next=7;break}return e.state.emptyPost||e.setState({alert:{type:"secondary",message:"Post can't be empty"}}),t.abrupt("return");case 7:if(!(n.length>3e3)){t.next=10;break}return e.setState({alert:{type:"secondary",message:"Text can be at most 3,000 characters"}}),t.abrupt("return");case 10:if(s={text:n},!a){t.next=19;break}return t.next=14,oe(a.src);case 14:return c=t.sent,t.next=17,ie(c);case 17:o=t.sent,s.media={mediaType:a.type,data:o};case 19:return t.prev=19,t.next=22,ee(s);case 22:i=t.sent,re(u=i.data),a&&(u.media.data=c),u.user.profilePic=r.profilePic,(d=Object(O.a)(e.state.posts)).unshift(u),e.setState({posts:d,alert:null}),t.next=35;break;case 32:t.prev=32,t.t0=t.catch(19),t.t0.response&&400===t.t0.response.status&&m.b.error("Something went wrong creating post");case 35:case"end":return t.stop()}}),t,null,[[19,32]])})));return function(e,n){return t.apply(this,arguments)}}(),e.handleSearchByUsername=function(){var t=Object(u.a)(l.a.mark((function t(n){var a,r,s,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.trim().toLowerCase(),r=a?"username":void 0,t.next=4,$({filter:r,filterData:a});case 4:return s=t.sent,c=s.data,t.next=8,pe(c);case 8:e.setState({posts:c,filter:r,filterData:a,loadMore:c.length>=ot,relativeDate:null});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handlePostType=function(){var t=Object(u.a)(l.a.mark((function t(n){var a,r,s,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.context.currentUser._id,"Liked Posts"===n?a="likedPosts":"Following"===n&&(a="following"),t.next=4,$({filter:a,filterData:r});case 4:return s=t.sent,c=s.data,t.next=8,pe(c);case 8:e.setState({posts:c,filter:a,filterData:r,loadMore:c.length>=ot,relativeDate:null});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleDateSelected=function(){var t=Object(u.a)(l.a.mark((function t(n){var a,r,s,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="daysAgo","Today"===n?a=0:"Yesterday"===n?a=1:n.match(/Last \d+ Days/i)&&(a=n.split(" ")[1]),t.next=4,$({filter:r,filterData:a});case 4:return s=t.sent,c=s.data,t.next=8,pe(c);case 8:e.setState({posts:c,filter:r,filterData:a,loadMore:c.length>=ot,relativeDate:n});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleDateRange=function(){var t=Object(u.a)(l.a.mark((function t(n,a){var r,s,c,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="dateRange",s=n+","+a,t.next=4,$({filter:r,filterData:s});case 4:return c=t.sent,o=c.data,t.next=8,pe(o);case 8:e.setState({posts:o,filter:r,filterData:s,loadMore:o.length>=ot,relativeDate:null});case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.handlePostClick=function(t){e.props.history.push("/posts/".concat(t))},e.handleProfileClick=function(t){e.props.history.push("/profile/".concat(t))},e.handleShowSearch=function(){e.setState({showSearch:!e.state.showSearch})},e.handleClearFilter=Object(u.a)(l.a.mark((function t(){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$({});case 2:return n=t.sent,a=n.data,t.next=6,pe(a);case 6:e.setState({posts:a,filter:null,filterData:null,loadMore:a.length>=ot,relativeDate:null});case 7:case"end":return t.stop()}}),t)}))),e.clearFilterComponent=function(t){return Object(k.jsxs)("div",{children:[Object(k.jsx)("span",{className:"clickable",onClick:function(){return e.handleClearFilter()},children:"Clear Filter:"}),Object(k.jsx)("span",{style:{color:"var(--color-accent)",marginLeft:"5px"},children:e.filterMap[t]})]})},e.filterComponent=function(t){return Object(k.jsx)("span",{className:"clickable",onClick:e.handleShowSearch,children:t})},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.resize),this.resize(),this.populatePosts()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resize)}},{key:"render",value:function(){var e=this.state,t=e.posts,n=e.mobile,a=e.showSearch,s=e.loadMore,c=e.filter,o=e.relativeDate,i=e.alert,l=this.context.currentUser;return t?Object(k.jsxs)("div",{className:"page posts-page",children:[n&&Object(k.jsx)("div",{style:{display:"flex",width:"100%",maxWidth:"500px",justifyContent:a?"flex-end":c?"space-between":"flex-end",padding:"10px 20px"},children:a?this.filterComponent("See results"):Object(k.jsxs)(r.a.Fragment,{children:[c&&this.clearFilterComponent(c),this.filterComponent("Filter")]})}),Object(k.jsx)("div",{className:"post-search-container "+(n?a?"animate__animated animate__fadeIn":"hide":""),children:Object(k.jsx)(U,{searchByUsername:this.handleSearchByUsername,dates:this.relativeDates,selectedDate:o,onDateSelected:this.handleDateSelected,onDateRange:this.handleDateRange,onPostType:this.handlePostType})}),Object(k.jsxs)("div",{className:"posts-container "+(n?a?"hide":"animate__animated animate__fadeIn":""),children:[!n&&c&&this.clearFilterComponent(c),!c&&Object(k.jsx)(V,{onCreate:this.handleCreate,alert:i}),t.length?Object(k.jsx)(ct,{posts:t,onPostClick:this.handlePostClick,onProfileClick:this.handleProfileClick,onDelete:this.handleDelete,onLoadMore:this.handleLoadMore,loadMore:s,onLike:this.handleLike,onFollow:this.handleFollow,hideOptions:!l}):Object(k.jsx)("p",{style:{textAlign:"center"},children:"No posts found"})]})]}):Object(k.jsx)("p",{style:{textAlign:"center",paddingTop:"calc(var(--nav-height) * 2)"},children:"Loading posts..."})}}]),n}(a.Component);it.contextType=v;var lt=it;function ut(){return Object(k.jsx)("h2",{className:"center",style:{padding:10},children:"Unable to find the page you're looking for"})}var dt=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={post:null},e.handleDelete=function(){var t=Object(u.a)(l.a.mark((function t(n){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,te(n);case 3:e.props.history.replace("/"),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),t.t0.response&&(401===(a=t.t0.response.status)?m.b.warn("You can only delete your own posts/comments"):404===a&&m.b.error("Post not found. Try refresshing"));case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),e.handleProfileClick=function(t){e.props.history.push("/profile/".concat(t))},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.setPost()}},{key:"setPost",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a,r,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.props.match.params.id,e.next=4,c=t,G.get("".concat(Z,"/").concat(c));case 4:return n=e.sent,a=n.data,e.next=8,ye(t);case 8:return r=e.sent,s=r.data,a.comments=s,e.next=13,ue(a);case 13:return e.next=15,fe(a.comments);case 15:this.setState({post:a}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),e.t0.response&&404===e.t0.response.status&&this.props.history.replace("/not-found");case 21:case"end":return e.stop()}var c}),e,this,[[0,18]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.post,t=this.context.currentUser;return e?Object(k.jsx)("div",{className:"page post-page",children:Object(k.jsx)("div",{className:"posts-container",children:Object(k.jsx)(ct,{posts:[e],showComments:!0,onProfileClick:this.handleProfileClick,onDelete:this.handleDelete,hideOptions:!t})})}):null}}]),n}(a.Component);dt.contextType=v;var pt=dt,ht=n(13),ft=n.n(ht),jt=n(20),mt=n.n(jt),bt=n(36);function xt(e,t){return Object(k.jsx)("div",{className:"alert alert--"+e,children:t})}var vt=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.label,a=e.onChange,r=e.alert,s=e.inputType,c=Object(w.a)(e,["name","label","onChange","alert","inputType"]);return Object(k.jsxs)("div",{className:"form__group",children:[Object(k.jsx)("label",{htmlFor:t,className:"label",children:n}),"textarea"===s?Object(k.jsx)("textarea",Object(o.a)(Object(o.a)({},c),{},{id:t,className:"text-box",name:t,onChange:function(e){return a(e)}})):Object(o.a)({},"password"===c.type?Object(k.jsx)(Ot,Object(o.a)(Object(o.a)({},c),{},{name:t,onChange:a})):Object(k.jsx)("input",Object(o.a)(Object(o.a)({},c),{},{id:t,className:"text-box",name:t,onChange:function(e){return a(e)}}))),r&&xt(r.type,r.message)]})}}]),n}(a.Component),Ot=function(e){var t=e.name,n=e.onChange,r=(e.type,Object(w.a)(e,["name","onChange","type"])),s=Object(a.useState)(!1),c=Object(Oe.a)(s,2),i=c[0],l=c[1];return Object(k.jsxs)("div",{className:"input-group",children:[Object(k.jsx)("input",Object(o.a)(Object(o.a)({},r),{},{id:t,type:i?"text":"password",className:"text-box",name:t,onChange:function(e){return n(e)}})),Object(k.jsx)("span",{className:"icon icon--small clickable",onClick:function(){return l(!i)},children:i?Object(k.jsx)(g.b,{}):Object(k.jsx)(g.c,{})})]})},gt=vt,wt=(n(122),function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={errors:{},data:{}},e.data={},e.renderButton=function(e){return Object(k.jsx)(W,{styles:["rounded","block"],size:"medium",color:"primary",children:e})},e.renderInput=function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.state.errors,s=r[t]?{type:"primary",message:r[t]}:null;return Object(k.jsx)(gt,Object(o.a)(Object(o.a)({},a),{},{name:t,label:n,onChange:e.handleChange,className:"text-box",alert:s}))},e.validate=function(){var t=ft.a.validate(e.data,e.schema).error;if(!t)return null;var n,a={},r=Object(se.a)(t.details);try{for(r.s();!(n=r.n()).done;){var s=n.value;a[s.path[0]]=s.message}}catch(c){r.e(c)}finally{r.f()}return a},e.handleSubmit=function(t){t.preventDefault();var n=e.validate();e.setState({errors:n||{}}),n||e.doSubmit()},e.doSubmit=function(){},e.validateProperty=function(t){var n=t.name,a=t.value,r=Object(bt.a)({},n,a),s=Object(bt.a)({},n,e.schema[n]),c=ft.a.validate(r,s).error;return c?c.details[0].message:null},e.handleChange=function(t){var n=t.currentTarget;e.data[n.name]=n.value},e}return n}(a.Component)),kt="loginToken",yt=Q.apiUrl+"/auth";function Ct(){return localStorage.getItem(kt)}function _t(){return(_t=Object(u.a)(l.a.mark((function e(t,n){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.post(yt,{email:t,password:n});case 2:a=e.sent,r=a.data,localStorage.setItem(kt,r),G.setJwt(Ct());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}G.setJwt(Ct());var St={login:function(e,t){return _t.apply(this,arguments)},logout:function(){localStorage.removeItem(kt)},hasCurrentUser:function(){return null!==localStorage.getItem(kt)},loginWithJwt:function(e){localStorage.setItem(kt,e),G.setJwt(Ct())},getJwt:Ct},Nt=n.p+"static/media/sbk_image.42ab24f7.svg",Pt=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).data={email:"",password:""},e.state={errors:{},alert:null},e.schema={email:ft.a.string().email().required().label("Email"),password:ft.a.string().min(8).required().label("Password")},e.doSubmit=Object(u.a)(l.a.mark((function t(){var n,a,r,s,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=e.data,a=n.email,r=n.password,t.next=4,St.login(a,r);case 4:return t.next=6,e.context.onLogin();case 6:s=e.props.location.state,window.location=s?s.from.pathname:"/",t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),t.t0.response&&400===t.t0.response.status&&(c=xt("primary",t.t0.response.data),e.setState({alert:c}));case 13:case"end":return t.stop()}}),t,null,[[0,10]])}))),e}return Object(p.a)(n,[{key:"render",value:function(){if(St.hasCurrentUser())return Object(k.jsx)(j.a,{to:"/"});var e=this.state,t=e.alert,n=e.errors;return Object(k.jsxs)("div",{className:"page login-page page-form",children:[Object(k.jsx)("img",{src:Nt,alt:""}),Object(k.jsxs)("form",{className:"form",onSubmit:this.handleSubmit,children:[Object(k.jsx)("h2",{children:"Login"}),mt.a.isEmpty(n)&&t,this.renderInput("email","Email",{autoFocus:!0}),this.renderInput("password","Password",{type:"password"}),this.renderButton("Login")]})]})}}]),n}(wt);Pt.contextType=v;var Dt=Pt,Ut=function(e){var t=e.component,n=e.render,a=Object(w.a)(e,["component","render"]);return Object(k.jsx)(j.b,Object(o.a)(Object(o.a)({},a),{},{render:function(e){return St.hasCurrentUser()?t?Object(k.jsx)(t,Object(o.a)({},e)):n(e):Object(k.jsx)(j.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},Ft=n(15),Mt=(n(128),n(73)),Lt=n(39),Tt=n.p+"static/media/favicon.5a003369.svg";var Et=function(){var e=Object(a.useContext)(v).currentUser,t=Object(a.useState)(!1),n=Object(Oe.a)(t,2),s=n[0],c=n[1],o=function(e){return c(e)};return Object(k.jsx)("nav",{className:"nav",children:Object(k.jsxs)("div",{className:"nav__container",children:[Object(k.jsxs)(Ft.c,{className:"nav__brand",to:"/posts",onClick:function(){return o(!1)},children:[Object(k.jsx)("img",{src:Tt,alt:"",className:"nav__logo"}),"SBKonnect"]}),Object(k.jsx)("ul",{className:"nav__menu "+(s?"active":""),children:e?Object(k.jsxs)(r.a.Fragment,{children:[Object(k.jsx)("li",{onClick:function(){return o(!1)},className:"nav__item",children:Object(k.jsx)(Ft.c,{className:"nav__link",activeClassName:"active",to:"/profile/"+e._id,children:"Profile"})}),Object(k.jsx)("li",{onClick:function(){return o(!1)},className:"nav__item",children:Object(k.jsx)(Ft.c,{className:"nav__link",activeClassName:"active",to:"/logout",children:"Logout"})}),Object(k.jsx)("li",{onClick:function(){return o(!1)},className:"nav__item",children:Object(k.jsx)(Ft.c,{className:"nav__link",activeClassName:"active",to:"/posts",children:"Posts"})})]}):Object(k.jsxs)(r.a.Fragment,{children:[Object(k.jsx)("li",{onClick:function(){return o(!1)},className:"nav__item",children:Object(k.jsx)(Ft.c,{className:"nav__link",activeClassName:"active",to:"/login",children:"Login"})}),Object(k.jsx)("li",{onClick:function(){return o(!1)},className:"nav__item",children:Object(k.jsx)(Ft.c,{className:"nav__link",activeClassName:"active",to:"/register",children:"Register"})}),Object(k.jsx)("li",{onClick:function(){return o(!1)},className:"nav__item",children:Object(k.jsx)(Ft.c,{className:"nav__link",activeClassName:"active",to:"/posts",children:"Posts"})})]})}),Object(k.jsx)("div",{className:"nav__menu-icon clickable icon--medium",onClick:function(){return o(!s)},children:s?Object(k.jsx)(Lt.b,{}):Object(k.jsx)(Mt.a,{})})]})})},At=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"componentDidMount",value:function(){St.logout(),window.location="/login"}},{key:"render",value:function(){return null}}]),n}(a.Component),It=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.onFollow,a=e.isFollowing,r=this.context.currentUser._id===t._id;return Object(k.jsxs)("div",{className:"profile-details",children:[Object(k.jsxs)("div",{className:"content-details",children:[Object(k.jsx)(Be,{src:t.profilePic}),Object(k.jsxs)("span",{className:"username",children:[t.username+(r?" (Me)":"")," "]})]}),r?Object(k.jsx)(Ft.b,{to:"/profile/edit",children:Object(k.jsx)(Lt.a,{})}):Object(k.jsx)(W,{styles:["outline"],size:"small",onClick:function(){return n(t._id)},children:a?"Unfollow":"Follow"})]})}}]),n}(a.Component);It.contextType=v;var Rt=It,zt=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.tabs,n=e.currentTab,a=e.onClick;return Object(k.jsx)("div",{className:"tabnav",children:t.map((function(e){return Object(k.jsx)("p",{className:"tabnav__item clickable"+(e===n?" tabnav__item--active":""),onClick:function(){return a(e)},children:e},e)}))})}}]),n}(a.Component),Bt=(n(129),function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.user,n=e.onClick;return Object(k.jsxs)("div",{className:"profile-simple clickable",onClick:function(){return n(t._id)},children:[Object(k.jsx)(Be,{src:t.profilePic}),Object(k.jsx)("span",{children:t.username})]})}}]),n}(a.Component)),Wt=function(e){var t=e.loadMore,n=e.onLoadMore,a=e.users,r=e.onProfileClick;return Object(k.jsxs)("div",{className:"profile-list",children:[a.map((function(e){return Object(k.jsx)(Bt,{user:e,onClick:r},e._id)})),t&&Object(k.jsx)("div",{className:"load-more-container",children:Object(k.jsx)(W,{color:"secondary",size:"small",onClick:n,children:"Load More"})})]})},Jt=Q.loadLimit,Kt=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={currentTab:"Posts",posts:null,user:null,following:null,followers:null},e.tabs=["Posts","Following","Followers"],e.handleTabChange=function(t){var n=e.state,a=n.posts,r=n.following,s=n.followers,c=e.props.match.params.id;"Posts"!==t||a?"Following"!==t||r?"Followers"!==t||s||e.setFollowers(c):e.setFollowing(c):e.setPosts(c),e.setState({currentTab:t})},e.handleDeletePost=function(){var t=Object(u.a)(l.a.mark((function t(n){var a,r,s,c,o,i,u;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e.state,r=a.user,s=a.posts,t.next=4,te(n);case 4:return t.next=6,$({filter:"userId",filterData:r._id,maxDate:s[s.length-1].date,limit:1});case 6:return c=t.sent,o=c.data,t.next=10,pe(o);case 10:i=s.filter((function(e){return e._id!==n})).concat(o),e.setState({posts:i,loadMorePosts:0!==o.length}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),t.t0.response&&(401===(u=t.t0.response.status)?m.b.warn("You can only delete your own posts/comments"):404===u&&m.b.error("Post not found. Refresh to get latest content"));case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}(),e.setFollowing=function(){var t=Object(u.a)(l.a.mark((function t(n){var a,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ee(n);case 3:return a=t.sent,r=a.data,t.next=7,xe(r);case 7:e.setState({following:r,loadMoreFollowing:r.length>=Jt}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log("Error: ",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}(),e.setFollowers=function(){var t=Object(u.a)(l.a.mark((function t(n){var a,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ae(n);case 3:return a=t.sent,r=a.data,t.next=7,xe(r);case 7:e.setState({followers:r,loadMoreFollowers:r.length>=Jt}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log("Error: ",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}(),e.setUser=function(){var t=Object(u.a)(l.a.mark((function t(n){var a,r,s,c,o,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Te(n);case 3:return a=t.sent,r=a.data,t.next=7,me(r);case 7:return t.next=9,$({filter:"userId",filterData:n});case 9:return s=t.sent,c=s.data,t.next=13,Re(n);case 13:return o=t.sent,i=o.data,t.next=17,pe(c);case 17:e.setState({user:r,posts:c,following:null,followers:null,currentTab:"Posts",loadMorePosts:c.length>=Jt,isFollowing:i}),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(0),console.log("Error: ",t.t0);case 23:case"end":return t.stop()}}),t,null,[[0,20]])})));return function(e){return t.apply(this,arguments)}}(),e.handleLoadMorePosts=Object(u.a)(l.a.mark((function t(){var n,a,r,s,c,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,a=n.posts,r=n.user,t.next=3,$({filter:"userId",filterData:r._id,maxDate:a[a.length-1].date});case 3:return s=t.sent,c=s.data,t.next=7,pe(c);case 7:o=a.concat(c),e.setState({posts:o,loadMorePosts:c.length>=Jt});case 9:case"end":return t.stop()}}),t)}))),e.handleLoadMoreFollowing=Object(u.a)(l.a.mark((function t(){var n,a,r,s,c,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,a=n.following,r=n.user,t.next=3,Ee(r._id,a.length&&a[a.length-1].date);case 3:return s=t.sent,c=s.data,t.next=7,xe(c);case 7:o=a.concat(c),e.setState({following:o,loadMoreFollowing:c.length>=Jt});case 9:case"end":return t.stop()}}),t)}))),e.handleLoadMoreFollowers=Object(u.a)(l.a.mark((function t(){var n,a,r,s,c,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,a=n.followers,r=n.user,t.next=3,Ae(r._id,a.length&&a[a.length-1].date);case 3:return s=t.sent,c=s.data,t.next=7,xe(c);case 7:o=a.concat(c),e.setState({followers:o,loadMoreFollowers:c.length>=Jt});case 9:case"end":return t.stop()}}),t)}))),e.handleFollow=function(){var t=Object(u.a)(l.a.mark((function t(n){var a,r,s,c,o,i,u,d,p,h,f,j,m;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,r=a.isFollowing,s=a.following,c=a.followers,o=a.user,i=e.context.currentUser,t.next=4,Le({following:{id:n,follow:!r}});case 4:if(!r){t.next=15;break}if(!(u=c&&c.filter((function(e){return e._id!==i._id})))){t.next=13;break}return t.next=9,Ae(o._id,c[c.length-1].date,1);case 9:h=t.sent,f=h.data,u=u.concat(f),p=0!==f.length;case 13:t.next=23;break;case 15:return t.next=17,Te(i._id);case 17:return j=t.sent,m=j.data,t.next=21,me(m);case 21:u=c&&[m].concat(Object(O.a)(c)),i._id===o._id&&(d=s&&[m].concat(Object(O.a)(s)));case 23:e.setState({isFollowing:!r,following:d,followers:u,loadMoreFollowers:p});case 24:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleProfileClick=function(t){e.props.history.push("/profile/".concat(t))},e.handlePostClick=function(t){e.props.history.push("/posts/".concat(t))},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.unlisten=this.props.history.listen((function(t,n){var a=t.pathname;if(a.startsWith("/profile")){var r=(a=t.pathname.endsWith("/")?t.pathname.substring(1,t.pathname.length):t.pathname.substring(1)).split("/");2===r.length&&"edit"!==r[1]&&e.setUser(r[1])}})),this.setUser(this.props.match.params.id)}},{key:"componentWillUnmount",value:function(){this.unlisten()}},{key:"render",value:function(){var e=this.state,t=e.user,n=e.currentTab,a=e.posts,r=e.following,s=e.followers,c=e.loadMorePosts,o=e.loadMoreFollowing,i=e.loadMoreFollowers,l=e.isFollowing,u=this.context.currentUser;return t?Object(k.jsx)("div",{className:"page profile-page",children:Object(k.jsxs)("div",{className:"profile-card",children:[Object(k.jsxs)("header",{className:"card__header profile-card__header",children:[Object(k.jsx)(Rt,{user:t,onFollow:this.handleFollow,isFollowing:l}),Object(k.jsx)(zt,{tabs:this.tabs,currentTab:n,onClick:this.handleTabChange})]}),Object(k.jsxs)("div",{className:"card__body profile-card__body",children:["Posts"===n&&(a?Object(k.jsx)("div",{className:"posts-container animate__animated animate__fadeIn",children:Object(k.jsx)(ct,{posts:a,onProfileClick:this.handleProfileClick,onPostClick:this.handlePostClick,onDelete:this.handleDeletePost,onLoadMore:this.handleLoadMorePosts,loadMore:c,optionMenu:u._id===t._id&&["Delete"],hideOptions:u._id!==t._id})}):Object(k.jsx)("p",{children:"Loading posts..."})),"Following"===n&&(r?Object(k.jsx)("div",{className:"following-container animate__animated animate__fadeIn",children:Object(k.jsx)(Wt,{users:r,onProfileClick:this.handleProfileClick,loadMore:o,onLoadMore:this.handleLoadMoreFollowing})}):Object(k.jsx)("p",{children:"Loading followings..."})),"Followers"===n&&(s?Object(k.jsx)("div",{className:"followers-container animate__animated animate__fadeIn",children:Object(k.jsx)(Wt,{users:s,onProfileClick:this.handleProfileClick,loadMore:i,onLoadMore:this.handleLoadMoreFollowers})}):Object(k.jsx)("p",{children:"Loading followers.."}))]})]})}):null}}]),n}(a.Component);Kt.contextType=v;var qt=Kt,Vt=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={errors:{},alert:null},e.data={},e.schema={description:ft.a.string().allow("")},e.doSubmit=Object(u.a)(l.a.mark((function t(){var n,a,r,s,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=e.data.description,t.next=4,Le({description:n});case 4:a=t.sent,r=a.data,s=xt("accent","Description updated"),e.setState({alert:s}),e.context.updateUser("description",r),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),t.t0.response&&400===t.t0.response.status&&(c=xt("primary",t.t0.response.data),e.setState({alert:c}));case 14:case"end":return t.stop()}}),t,null,[[0,11]])}))),e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.data.description=this.context.currentUser.description}},{key:"render",value:function(){var e=this.context.currentUser.description,t=this.state,n=t.alert,a=t.errors;return Object(k.jsx)("div",{className:"page page-form",children:Object(k.jsxs)("form",{onSubmit:this.handleSubmit,className:"form",children:[Object(k.jsx)("h2",{children:"Edit Description"}),mt.a.isEmpty(a)&&n,this.renderInput("description","",{inputType:"textarea",defaultValue:e}),this.renderButton("Save")]})})}}]),n}(wt);Vt.contextType=v;var Yt=Vt,Ht=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={errors:{},alert:null},e.schema={username:ft.a.string()},e.data={},e.doSubmit=Object(u.a)(l.a.mark((function t(){var n,a,r,s,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=e.data.username,t.next=4,Le({username:n});case 4:a=t.sent,r=a.data,s=xt("accent","Username updated"),e.setState({alert:s}),e.context.updateUser("username",r),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),t.t0.response&&400===t.t0.response.status&&(c={username:t.t0.response.data},e.setState({errors:c}));case 14:case"end":return t.stop()}}),t,null,[[0,11]])}))),e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.data.username=this.context.currentUser.username}},{key:"render",value:function(){var e=this.context.currentUser.username,t=this.state,n=t.alert,a=t.errors;return Object(k.jsx)("div",{className:"page page-form",children:Object(k.jsxs)("form",{onSubmit:this.handleSubmit,className:"form",children:[Object(k.jsx)("h2",{children:"Edit Username"}),mt.a.isEmpty(a)&&n,this.renderInput("username","",{defaultValue:e}),this.renderButton("Save")]})})}}]),n}(wt);Ht.contextType=v;var Gt=Ht,Qt=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={errors:{},alert:null},e.data={},e.schema={email:ft.a.string().email()},e.doSubmit=Object(u.a)(l.a.mark((function t(){var n,a,r,s,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=e.data.email,t.next=4,Le({email:n});case 4:a=t.sent,r=a.data,s=xt("accent","Email updated"),e.setState({alert:s}),e.context.updateUser("email",r),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),t.t0.response&&400===t.t0.response.status&&(c={email:t.t0.response.data},e.setState({errors:c}));case 14:case"end":return t.stop()}}),t,null,[[0,11]])}))),e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.data.email=this.context.currentUser.email}},{key:"render",value:function(){var e=this.context.currentUser.email,t=this.state,n=t.errors,a=t.alert;return Object(k.jsx)("div",{className:"page page-form",children:Object(k.jsxs)("form",{onSubmit:this.handleSubmit,className:"form",children:[Object(k.jsx)("h2",{children:"Edit Email"}),mt.a.isEmpty(n)&&a,this.renderInput("email","",{defaultValue:e}),this.renderButton("Save")]})})}}]),n}(wt);Qt.contextType=v;var Xt=Qt,Zt=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={errors:{},alert:null},e.schema={password:ft.a.string().min(8),confirmPassword:ft.a.string()},e.data={password:"",confirmPassword:""},e.doSubmit=Object(u.a)(l.a.mark((function t(){var n,a,r,s,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.data,a=n.password,n.confirmPassword===a){t.next=5;break}return r={confirmPassword:"Passwords don't match"},e.setState({errors:r}),t.abrupt("return");case 5:return t.prev=5,t.next=8,Le({password:a});case 8:s=xt("accent","Password updated"),e.setState({alert:s}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),t.t0.response&&400===t.t0.response.status&&(c={password:t.t0.response.data},e.setState({errors:c}));case 15:case"end":return t.stop()}}),t,null,[[5,12]])}))),e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.state,t=e.alert,n=e.errors;return Object(k.jsx)("div",{className:"page page-form",children:Object(k.jsxs)("form",{onSubmit:this.handleSubmit,className:"form",children:[Object(k.jsx)("h2",{children:"Edit Password"}),mt.a.isEmpty(n)&&t,this.renderInput("password","New Password",{type:"password"}),this.renderInput("confirmPassword","Confirm Password",{type:"password"}),this.renderButton("Save")]})})}}]),n}(wt);Zt.contextType=v;var $t=Zt,en=function(e){var t=e.label,n=e.text,a=e.icon,r=Object(w.a)(e,["label","text","icon"]);return Object(k.jsxs)("div",Object(o.a)(Object(o.a)({},r),{},{children:[Object(k.jsx)("span",{className:"edit-row__label",children:t}),Object(k.jsx)("span",{className:"edit-row__text",children:n}),Object(k.jsx)("span",{className:"icon",children:a})]}))},tn=L(en),nn=(n(130),function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).goToUpdate=function(t){e.props.history.push("/profile/edit/".concat(t))},e.handleProfilePicUpload=function(){var t=Object(u.a)(l.a.mark((function t(n){var a,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,oe(n);case 3:return a=t.sent,e.context.updateUser("profilePic",a),t.next=7,ie(a);case 7:return r=t.sent,t.next=10,Le({profilePic:r});case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),t.t0.response?console.log("Error: ",t.t0.response):console.log("Error: ",t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=this.context.currentUser,n=t.email,a=t.username,r=t.description,s=t.profilePic,c=Object(k.jsx)(g.a,{});return Object(k.jsxs)("div",{className:"page profile-edit-page",children:[Object(k.jsx)("div",{className:"profile-edit__header",children:"My Profile"}),Object(k.jsx)(tn,{label:"Photo",text:"Shown on your posts and comments",icon:Object(k.jsx)(Be,{src:s,onClick:function(){}}),className:"edit-row profile-edit__photo clickable",extensions:["jpg","jpeg","gif","png"],maxFileSize:2,onFileChosen:this.handleProfilePicUpload}),Object(k.jsx)(en,{label:"Username",text:a,icon:c,className:"edit-row profile-edit__username clickable",onClick:function(){return e.goToUpdate("username")}}),Object(k.jsx)(en,{label:"Email",text:n,icon:c,className:"edit-row profile-edit__email clickable",onClick:function(){return e.goToUpdate("email")}}),Object(k.jsx)(en,{label:"Description",text:r,icon:c,className:"edit-row profile-edit__description clickable",onClick:function(){return e.goToUpdate("description")}}),Object(k.jsx)(en,{label:"Password",text:"Click to change",icon:c,className:"edit-row profile-edit__password clickable",onClick:function(){return e.goToUpdate("password")}})]})}}]),n}(a.Component));nn.contextType=v;var an=nn,rn=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).componentDidMount=function(){return window.scrollTo(0,0)},e.componentDidUpdate=function(t){e.props.location!==t.location&&window.scrollTo(0,0)},e.render=function(){return e.props.children},e}return n}(a.PureComponent),sn=Object(j.g)(rn),cn=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={errors:{},data:{},alert:null},e.data={username:"",email:"",password:""},e.schema={username:ft.a.string().min(5).max(255).required().label("Username"),email:ft.a.string().min(8).max(255).email().required().label("Email"),password:ft.a.string().min(8).max(255).required().label("Password")},e.doSubmit=Object(u.a)(l.a.mark((function t(){var n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ue(e.data);case 3:return n=t.sent,St.loginWithJwt(n.headers["x-auth-token"]),t.next=7,e.context.onLogin();case 7:window.location="/",t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),t.t0.response&&400===t.t0.response.status&&(a=xt("primary",t.t0.response.data),e.setState({alert:a}));case 13:case"end":return t.stop()}}),t,null,[[0,10]])}))),e}return Object(p.a)(n,[{key:"render",value:function(){if(St.hasCurrentUser())return Object(k.jsx)(j.a,{to:"/"});var e=this.state,t=e.alert,n=e.errors;return Object(k.jsxs)("div",{className:"page register-page page-form",children:[Object(k.jsx)("img",{src:Nt,alt:""}),Object(k.jsxs)("form",{onSubmit:this.handleSubmit,className:"form",children:[Object(k.jsx)("h2",{children:"Register"}),mt.a.isEmpty(n)&&t,this.renderInput("username","Username",{autoFocus:!0}),this.renderInput("email","Email"),this.renderInput("password","Password",{type:"password"}),this.renderButton("Register")]})]})}}]),n}(wt);cn.contextType=v;var on=cn,ln=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={currentUser:null},e.setUser=Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(St.hasCurrentUser()){t.next=2;break}return t.abrupt("return");case 2:try{e.handleLogin()}catch(n){m.b.error("Something went wrong"),St.logout()}case 3:case"end":return t.stop()}}),t)}))),e.handleLogin=Object(u.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Fe();case 2:if(!(n=t.sent).profilePic){t.next=7;break}return t.next=6,le(n.profilePic);case 6:n.profilePic=t.sent;case 7:e.setState({currentUser:n});case 8:case"end":return t.stop()}}),t)}))),e.updateUser=function(t,n){var a=Object(o.a)({},e.state.currentUser);a[t]=n,e.setState({currentUser:a})},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.setUser()}},{key:"render",value:function(){return St.hasCurrentUser()&&!this.state.currentUser?null:Object(k.jsx)(v.Provider,{value:{currentUser:this.state.currentUser,onLogin:this.handleLogin,updateUser:this.updateUser},children:Object(k.jsxs)(r.a.Fragment,{children:[Object(k.jsxs)(b.a,{children:[Object(k.jsx)("link",{rel:"icon",type:"image/svg+xml",href:Tt,sizes:"any"}),Object(k.jsx)("title",{children:"SBKonnect"})]}),Object(k.jsx)(m.a,{}),Object(k.jsx)(Et,{}),Object(k.jsx)("main",{children:Object(k.jsx)(sn,{children:Object(k.jsxs)(j.d,{children:[Object(k.jsx)(j.b,{path:"/register",component:on,exact:!0}),Object(k.jsx)(j.b,{path:"/login",component:Dt,exact:!0}),Object(k.jsx)(j.b,{path:"/logout",component:At,exact:!0}),Object(k.jsx)(j.b,{path:"/posts/:id",component:pt,exact:!0}),Object(k.jsx)(j.b,{path:"/posts",component:lt,exact:!0}),Object(k.jsx)(Ut,{path:"/profile/edit",component:an,exact:!0}),Object(k.jsx)(Ut,{path:"/profile/:id",component:qt,exact:!0}),Object(k.jsx)(Ut,{path:"/profile/edit/username",component:Gt,exact:!0}),Object(k.jsx)(Ut,{path:"/profile/edit/email",component:Xt,exact:!0}),Object(k.jsx)(Ut,{path:"/profile/edit/description",component:Yt,exact:!0}),Object(k.jsx)(Ut,{path:"/profile/edit/password",component:$t,exact:!0}),Object(k.jsx)(j.b,{path:"/not-found",component:ut}),Object(k.jsx)(j.a,{from:"/",to:St.hasCurrentUser()?"/posts":"/login",exact:!0}),Object(k.jsx)(j.a,{to:"/not-found"})]})})}),Object(k.jsx)("footer",{})]})})}}]),n}(a.Component),un=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,132)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))};c.a.render(Object(k.jsx)(Ft.a,{children:Object(k.jsx)(ln,{})}),document.getElementById("root")),un()},64:function(e,t,n){},79:function(e,t,n){},86:function(e,t,n){},87:function(e,t,n){}},[[131,1,2]]]);
//# sourceMappingURL=main.526d635f.chunk.js.map